(this.webpackJsonpsmartxray=this.webpackJsonpsmartxray||[]).push([[0],{190:function(e,t){},240:function(e,t,a){e.exports=a(442)},245:function(e,t,a){},246:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},431:function(e,t,a){},436:function(e,t){},437:function(e,t){},438:function(e,t){},439:function(e,t){},440:function(e,t){},442:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),o=a.n(l),i=(a(245),a(246),a(16)),c=a(13),s=a(18),m=a(15),u=a(19),d=a(35),g=function(e){return{type:"LOGIN",payload:e}},p=function(e){return{type:"USER_NAME",payload:e}},E=function(e){return{type:"USER_ID",payload:e}},f=function(e){return{type:"HISTORY",payload:e}},h=function(e){return{type:"RESULT",payload:e}},y=a(5),b=a(31),v=(a(251),a(25)),w=(a(252),"https://xray1.deepnets.in"),C=a(28),k=a(475),S=a(133),j=a(479),I=a(480),_=a(481),x=a(482),O=a(483),A=a(499),F=a(501),N=a(484),H=a(502),T=a(486),P=a(6),D=a(498),M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).getData=function(){a.setState({loading:!0}),fetch(w+"/history",{method:"GET",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){return 401===e.status?(sessionStorage.clear(),a.props.loginAction(!1),window.location.replace("/")):200===e.status&&a.props.historyAction(!0),e.json()})).then((function(e){console.log(e),e.accessToken&&console.log("token: ",e.accessToken),a.setState({config:e.configuration,data:e.data,loading:!1,isUpdate:!1})})).catch((function(e){return console.log(e)}))},a.calculate=function(e){a.setState({loading:!0}),fetch(w+"/userInput",{method:"PUT",mode:"cors",body:JSON.stringify({cardiomegaly:a.state.cardiomegaly,edema:a.state.edema,consolidation:a.state.consolidation,atelectasis:a.state.atelectasis,pleural_effusion:a.state.pleural_effusion,active_tuberculosis:a.state.active_tuberculosis,healed_tuberculosis:a.state.healed_tuberculosis,metastasis:a.state.metastasis,mass_lesion:a.state.mass_lesion,calcification:a.state.calcification,none:a.state.none,userAccessId:e}),headers:{"Content-Type":"application/json","x-access-token":sessionStorage.getItem("access_token"),"x-refresh-token":sessionStorage.getItem("refresh_token")}}).then((function(e){return 401===e.status&&(sessionStorage.clear(),a.props.loginAction(!1),window.location.replace("/")),e.json()})).then((function(e){console.log(e),e.access_token&&sessionStorage.setItem("access_token",e.access_token),500===e.status?a.setState({loading:!1,open:!0,alertMessage:"Something went wrong, please contact system admin",isUpdate:!1}):(a.getData(),console.log(a.state))})).catch((function(e){return console.log(e)}))},a.history=function(){var e=a.state,t=e.data,n=e.page,l=e.content;if(0===t.length&&null===l)return r.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},r.a.createElement(S.a,{variant:"h3"},"No AI data found")));var o=[{name:"Cardiomegaly",value:(100*(l=t[n-1]).score.cardiomegaly).toFixed(2),threshold:46.52},{name:"Edema",value:(100*l.score.edema).toFixed(2),threshold:71.05},{name:"Consolidation",value:(100*l.score.consolidation).toFixed(2),threshold:65.9},{name:"Atelectasis",value:(100*l.score.atelectasis).toFixed(2),threshold:54.93},{name:"Pleural Effusion",value:(100*l.score.pleural_effusion).toFixed(2),threshold:34.61}],i=["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921"];return r.a.createElement("div",{style:{flexGrow:1,margin:"1.5%"}},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:3,wrap:"wrap"},r.a.createElement("img",{style:{maxWidth:"100%",marginBottom:"10%"},src:w+"/"+l.processed_image_path,alt:"X-Ray"}),null===l.report_path?r.a.createElement(S.a,{variant:"h5"}," No report available "):r.a.createElement("a",{href:w+"/"+l.report_path,target:"_blank"},"Report")),r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(C.c,{style:{fontSize:"calc(5px + 2vmin)"},width:1e3,height:600,data:o},r.a.createElement(C.h,{tick:!1,dataKey:"name"}),r.a.createElement(C.i,{interval:"preserveStartEnd",domain:[0,100]}),r.a.createElement(C.g,null),r.a.createElement(C.d,{align:"right",layout:"vertical",verticalAlign:"middle",content:function(){return r.a.createElement("ul",null,o.map((function(e,t){return r.a.createElement("li",{key:t,style:{color:i[t],listStyleType:"square"}},r.a.createElement("p",{style:{color:"black"}},e.name))})))}}),r.a.createElement(C.a,{dataKey:"value"},o.map((function(e,t){return r.a.createElement(C.b,{key:"cell-".concat(t),fill:i[t],stroke:i[t]})})))))),r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(j.a,{style:{border:"2px solid black"}},r.a.createElement(I.a,null,r.a.createElement(_.a,null,r.a.createElement(x.a,{align:"center"}),r.a.createElement(x.a,{align:"center"},"Cardiomegaly"),r.a.createElement(x.a,{align:"center"},"Edema"),r.a.createElement(x.a,{align:"center"},"Consolidation"),r.a.createElement(x.a,{align:"center"},"Atelectasis"),r.a.createElement(x.a,{align:"center"},"Pleural effusion"),r.a.createElement(x.a,{align:"center"},"Active Tuberculosis"),r.a.createElement(x.a,{align:"center"},"Healed Tuberculosis"),r.a.createElement(x.a,{align:"center"},"Metastasis"),r.a.createElement(x.a,{align:"center"},"Mass Lesion"),r.a.createElement(x.a,{align:"center"},"Calcification")),r.a.createElement(_.a,null,r.a.createElement(x.a,null,"1",r.a.createElement("sup",null,"st")," Level"),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.cardiomegaly,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.edema,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.consolidation,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.atelectasis,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.pleural_effusion,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.active_tuberculosis,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.healed_tuberculosis,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.metastasis,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.mass_lesion,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.userInput.calcification,disabled:!0})}))),r.a.createElement(_.a,null,r.a.createElement(x.a,null,"2",r.a.createElement("sup",null,"nd")," Level"),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.cardiomegaly,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.edema,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.consolidation,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.atelectasis,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.pleural_effusion,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.active_tuberculosis,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.healed_tuberculosis,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.metastasis,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.mass_lesion,disabled:!0})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",checked:1===l.radiologistInput.calcification,disabled:!0})}))))))),"true"===a.state.config[0].allow_radiologist_reassess?a.state.isUpdate?r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(j.a,{style:{border:"2px solid black"}},r.a.createElement(I.a,null,r.a.createElement(_.a,null,r.a.createElement(x.a,{align:"center"}),r.a.createElement(x.a,{align:"center"},"Cardiomegaly"),r.a.createElement(x.a,{align:"center"},"Edema"),r.a.createElement(x.a,{align:"center"},"Consolidation"),r.a.createElement(x.a,{align:"center"},"Atelectasis"),r.a.createElement(x.a,{align:"center"},"Pleural effusion"),r.a.createElement(x.a,{align:"center"},"Active Tuberculosis"),r.a.createElement(x.a,{align:"center"},"Healed Tuberculosis"),r.a.createElement(x.a,{align:"center"},"Metastasis"),r.a.createElement(x.a,{align:"center"},"Mass Lesion"),r.a.createElement(x.a,{align:"center"},"Calcification"),r.a.createElement(x.a,{align:"center"},"None")),r.a.createElement(_.a,null,r.a.createElement(x.a,null,"Update 2",r.a.createElement("sup",null,"nd")," Level Input"),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"cardiomegaly",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"edema",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"consolidation",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"atelectasis",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"pleural_effusion",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"active_tuberculosis",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"healed_tuberculosis",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"metastasis",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"mass_lesion",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"calcification",onChange:a.onChange})})),r.a.createElement(x.a,{align:"center"},r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"none",onChange:a.onChange})}))))),r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(N.a,{onClick:function(){return a.calculate(sessionStorage.getItem("UserId"))}}," Save "),r.a.createElement(N.a,{onClick:function(){a.setState({isUpdate:!1})}}," Cancel ")))):r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(N.a,{shape:"rounded",variant:"outlined",size:"large",onClick:function(){a.setState({isUpdate:!0})}},"Update Input"))):null,r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(D.a,{shape:"rounded",variant:"outlined",size:"large",count:t.length,page:n,onChange:function(e,t){a.setState({page:t})}})))))},a.alert=function(){return r.a.createElement(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a.state.open,onClose:function(){return a.setState({open:!a.state.open})},autoHideDuration:2e3,message:a.state.message})},a.onChange=function(e){var t;a.setState(Object(b.a)({},a.state,(t={},Object(y.a)(t,e.target.name,e.target.checked),Object(y.a)(t,"inputSelection",!0===e.target.checked?a.state.inputSelection+1:0===a.state.inputSelection?0:a.state.inputSelection-1),t)))},a.feedbackChangeHandler=function(e,t){var n=e.target,r=n.name,l=n.value,o=a.state.data.findIndex((function(e){return e.userFeedback.user_access_details_id===t})),i=Object(v.a)(a.state.data);i[o].userFeedback=Object(b.a)({},i[o].userFeedback,Object(y.a)({},r,l)),a.setState({data:i})},a.updateFeedbackHandler=function(e,t){a.setState({loading:!0}),fetch(w+"/feedback/"+t,{method:"PUT",mode:"cors",body:JSON.stringify({feedback:a.state.data[e].userFeedback}),headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),200===e.status?a.setState({loading:!1,open:!0,message:"Feedback successfully updated"}):a.setState({loading:!1,open:!0,message:"Error in updating feedback, try after some time"})})).catch((function(e){a.setState({loading:!1,open:!0,message:e})}))},a.home=function(){a.props.historyAction(!1),a.setState({home:!0})},a.state={data:[],key:[],home:!1,loading:!1,open:!1,message:"",page:1,content:null,isUpdate:!1,inputSelection:0,config:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return this.state.loading?r.a.createElement(k.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},r.a.createElement(T.a,{disableShrink:!0})):this.state.home?r.a.createElement(re,null):this.history()}}]),t}(n.Component),R=Object(d.b)((function(e){return{login:e.login,history:e.history,userName:e.userName,userId:e.userId}}),(function(e){return{loginAction:function(t){e(g(t))},historyAction:function(t){e(f(t))},resultAction:function(t){e(h(t))}}}))(Object(P.a)((function(e){return{offset:e.mixins.toolbar,root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},img:{margin:"auto",display:"block",maxWidth:"400",maxHeight:"400"},item:{alignContent:"center",alignItems:"center",justifyContent:"center"}}}))(M)),U=a(488),L=a(503),W=a(489),G=a(490),Y=a(491),z=a(492),X=a(493),B=a(505),J=a(506),K=a(507),q=46.52,V=67.46,$=65.9,Q=54.93,Z=43.74,ee=a(504),te=a(487),ae=Object(te.a)("input")({display:"none"}),ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).onChangeHandlerXray=function(e){var t=new FileReader,n=e.target.files[0];if(a.setState({selectedXrayFile:null,xrayPreview:null,xrayFileName:null}),n){var r=e.target.files[0].name;console.log(r);var l=r.substring(r.lastIndexOf(".")+1);"dcm"===l||"DCM"===l||"jpg"===l||"JPG"===l||"raw"===l||"RAW"===l||"jpeg"===l||"JPEG"===l?(t.onloadend=function(){a.setState({invalidFile:!1,selectedXrayFile:n,xrayPreview:t.result,xrayFileName:r})},t.readAsDataURL(n)):a.setState({invalidFile:!0,open:!0,alertMessage:"Please upload valid xray"})}console.log(a.state)},a.onChangeHandlerReport=function(e){var t=new FileReader,n=e.target.files[0];if(a.setState({selectedReportFile:null,reportPreview:null,reportFileName:null}),n){var r=e.target.files[0].name;console.log(r);var l=r.substring(r.lastIndexOf(".")+1);"pdf"===l||"PDF"===l?(t.onloadend=function(){a.setState({invalidFile:!1,selectedReportFile:n,reportPreview:t.result,reportFileName:r})},t.readAsDataURL(n)):a.setState({open:!0,alertMessage:"Please upload valid report",invalidFile:!0})}},a.calculate=function(){if(console.log("State: ",a.state),a.setState({loading:!0}),null===a.state.selectedFile)alert("Please select file."),a.setState({loading:!1,open:!0,alertMessage:"Please select file."});else{var e={xray:a.state.selectedXrayFile,report:a.state.selectedReportFile},t=new FormData;t.append("xray",e.xray),t.append("report",e.report),t.append("cardiomegaly",a.state.cardiomegaly),t.append("edema",a.state.edema),t.append("consolidation",a.state.consolidation),t.append("atelectasis",a.state.atelectasis),t.append("pleural_effusion",a.state.pleural_effusion),t.append("active_tuberculosis",a.state.active_tuberculosis),t.append("healed_tuberculosis",a.state.healed_tuberculosis),t.append("metastasis",a.state.metastasis),t.append("mass_lesion",a.state.mass_lesion),t.append("calcification",a.state.calcification),t.append("none",a.state.none),fetch(w+"/calculate/"+sessionStorage.getItem("UserId"),{method:"POST",mode:"cors",body:t,headers:{Accept:"application/form-data","Access-Control-Allow-Origin":"*","x-access-token":sessionStorage.getItem("access_token"),"x-refresh-token":sessionStorage.getItem("refresh_token")}}).then((function(e){return 401===e.status&&(sessionStorage.clear(),a.props.loginAction(!1),window.location.replace("/")),e.json()})).then((function(e){null===e.data?a.setState({loading:!1,limit:!0}):a.setState({loading:!1,responseData:e.data,xrayPreview:null,selectedXrayFile:null,xrayFileName:null,reportPreview:null,selectedReportFile:null,reportFileName:null,open:!0,alertMessage:"File submitted successfully",inputSelection:0,cardiomegaly:void 0,edema:void 0,consolidation:void 0,atelectasis:void 0,pleural_effusion:void 0,active_tuberculosis:void 0,healed_tuberculosis:void 0,metastasis:void 0,mass_lesion:void 0,calcification:void 0,none:void 0})})).catch((function(e){return console.log(e)}))}},a.uploadImage=function(){return r.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},r.a.createElement(k.a,{container:!0,item:!0,direction:"row",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},r.a.createElement(k.a,{container:!0,item:!0,sm:3,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},r.a.createElement(S.a,{style:{padding:"5px 10px"},variant:"h4"},"Instructions"),r.a.createElement(S.a,{style:{padding:"2px"}},"Sample xray"),r.a.createElement("img",{id:"target",src:w+"/sample.jpg",style:{maxWidth:"100%"},alt:"sample image"}),r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"Only raw files are valid for xray"),r.a.createElement("li",null,"Only pdf files are valid for report"),r.a.createElement("li",null,"Please upload properly cropped and aligned image",r.a.createElement("br",null),"(Refer to the sample xray)"),r.a.createElement("li",null,"Please upload only black and white xray image"),r.a.createElement("li",null,"Only chest xrays are supported")))),r.a.createElement(k.a,{container:!0,item:!0,sm:!0,direction:"column",wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement("label",{htmlFor:"upload-button-xray"},r.a.createElement(ae,{color:"primary",id:"upload-button-xray",type:"file",onChange:a.onChangeHandlerXray}),r.a.createElement(N.a,{variant:"contained",endIcon:r.a.createElement(ee.a,null),component:"span"},"Upload Raw File")),r.a.createElement("img",{id:"target-xray",src:a.state.xrayPreview,style:{maxWidth:320,maxHeight:320},alt:a.state.xrayFileName})),r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement("label",{htmlFor:"upload-button-report"},r.a.createElement(ae,{color:"primary",id:"upload-button-report",type:"file",onChange:a.onChangeHandlerReport}),r.a.createElement(N.a,{variant:"contained",endIcon:r.a.createElement(ee.a,null),component:"span"},"Report")),r.a.createElement("img",{id:"target-report",src:a.state.reportPreview,style:{maxWidth:320,maxHeight:320},alt:a.state.reportFileName})))),r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap",style:{marginTop:"5%"}},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"flex-start",alignItems:"stretch",sm:!0,wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(S.a,{variant:"h4"},"Please select the condition(s) for the uploaded X-Ray"),r.a.createElement("br",null)),r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(U.a,null,r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"cardiomegaly",onChange:a.onChange}),label:"Cardiomegaly"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"edema",onChange:a.onChange}),label:"Edema"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"consolidation",onChange:a.onChange}),label:"Consolidation"})),r.a.createElement(U.a,null,r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"atelectasis",onChange:a.onChange}),label:"Atelectasis"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"pleural_effusion",onChange:a.onChange}),label:"Pleural Effusion"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"active_tuberculosis",onChange:a.onChange}),label:"Active Tuberculosis"})),r.a.createElement(U.a,null,r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"healed_tuberculosis",onChange:a.onChange}),label:"Healed Tuberculosis"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"metastasis",onChange:a.onChange}),label:"Metastasis"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"mass_lesion",onChange:a.onChange}),label:"Mass Lesion"})),r.a.createElement(U.a,null,r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"calcification",onChange:a.onChange}),label:"Calcification"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"none",onChange:a.onChange}),label:"None"}))))),r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap"},r.a.createElement(N.a,{type:"submit",disabled:a.state.invalidFile||null===a.state.selectedXrayFile||0===a.state.inputSelection,onClick:a.calculate,variant:"contained",style:{marginRight:"5%",marginTop:"7.5%"}},"Submit"),r.a.createElement(N.a,{type:"reset",onClick:a.goHome,variant:"contained"},"Cancel"))),a.alert()))},a.goHome=function(){window.location.reload()},a.onChange=function(e){var t;a.setState(Object(b.a)({},a.state,(t={},Object(y.a)(t,e.target.name,e.target.checked),Object(y.a)(t,"inputSelection",!0===e.target.checked?a.state.inputSelection+1:0===a.state.inputSelection?0:a.state.inputSelection-1),t)))},a.alert=function(){return r.a.createElement(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a.state.open,onClose:function(){return a.setState({open:!a.state.open})},autoHideDuration:2e3,message:a.state.alertMessage})},a.result=function(){if("true"===a.state.responseData.isError&&"Raising error: unwantedImage"==a.state.responseData.message)return r.a.createElement(L.a,{open:"true"===a.state.responseData.isError&&"Raising error: unwantedImage"==a.state.responseData.message,onClose:a.goHome},r.a.createElement(W.a,{style:{backgroundColor:"#3F51B5",color:"white"}},"Invalid Image"),r.a.createElement(G.a,{style:{marginTop:20}},r.a.createElement(Y.a,{color:"black"},"Please upload valid chest x-ray image.")),r.a.createElement(z.a,null,r.a.createElement(N.a,{onClick:a.goHome},"OK")));if("false"===a.state.responseData.isError){var e=a.state.responseData.result,t=[{name:"Cardiomegaly",value:(100*e[2]).toFixed(2),threshold:q},{name:"Edema",value:(100*e[3]).toFixed(2),threshold:V},{name:"Consolidation",value:(100*e[4]).toFixed(2),threshold:$},{name:"Atelectasis",value:(100*e[5]).toFixed(2),threshold:Q},{name:"Pleural Effusion",value:(100*e[6]).toFixed(2),threshold:Z}],n=["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921"];return r.a.createElement("div",{style:{flexGrow:1,padding:"5%"}},r.a.createElement(k.a,{container:!0,justify:"center",wrap:"wrap",spacing:1,direction:"column"},r.a.createElement(k.a,{item:!0,sm:!0,container:!0,wrap:"wrap",justify:"center",alignItems:"center",spacing:1},r.a.createElement(k.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},r.a.createElement("img",{src:w+"/"+e[1].split(".")[0]+"_"+sessionStorage.getItem("UserId")+"."+e[1].split(".")[1],style:{maxWidth:"100%"},alt:""})),r.a.createElement(k.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},r.a.createElement(X.a,null,r.a.createElement(C.f,{height:400,minWidth:700},r.a.createElement(C.c,{data:t},r.a.createElement(C.h,{dataKey:"name"}),r.a.createElement(C.i,null),r.a.createElement(C.g,null),r.a.createElement(C.d,{align:"center",verticalAlign:"bottom",content:function(){return r.a.createElement(B.a,{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingLeft:"10%"}},r.a.createElement("li",{style:{color:"black",listStyleType:"square",marginRight:"5%"}},r.a.createElement(S.a,{variant:"caption",style:{color:"black"}},"cut-off line")))}}),r.a.createElement(C.a,{dataKey:"value"},t.map((function(e,t){return r.a.createElement(C.b,{key:"cell-".concat(t),fill:n[t],stroke:n[t]})}))),r.a.createElement(C.e,{dataKey:"threshold",stroke:"black"})))))),r.a.createElement(k.a,{item:!0,sm:!0,container:!0,wrap:"wrap",alignContent:"center",alignItems:"center",justify:"center",spacing:1},r.a.createElement(k.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},r.a.createElement("ul",null,r.a.createElement("li",null,"Bar graph of any condition above the cut-off line indicates the positive result of that condition in the supplied xray"),r.a.createElement("li",null,"Please submit your analysis of xray conditions through the table below the graph."),r.a.createElement("li",null,"Select Yes/No for all conditions and press 'Submit Feedback' button"),r.a.createElement("li",null,"Please refrain from submitting incomplete/wrong feedback")),r.a.createElement(N.a,{variant:"contained",onClick:a.submitFeedback,disabled:null===a.state.feedback.cardiomegaly||null===a.state.feedback.edema||null===a.state.feedback.consolidation||null===a.state.feedback.atelectasis||null===a.state.feedback.pleural_effusion},"Submit feedback")),r.a.createElement(k.a,{container:!0,item:!0,sm:!0,wrap:"wrap"},r.a.createElement(X.a,null,r.a.createElement(j.a,{style:{border:"2px solid black",minWidth:650}},r.a.createElement(I.a,null,r.a.createElement(_.a,null,r.a.createElement(x.a,{align:"center"},"Cardiomegaly"),r.a.createElement(x.a,{align:"center"},"Edema"),r.a.createElement(x.a,{align:"center"},"Consolidation"),r.a.createElement(x.a,{align:"center"},"Atelectasis"),r.a.createElement(x.a,{align:"center"},"Pleural effusion")),r.a.createElement(_.a,null,r.a.createElement(x.a,{align:"center"},(100*e[2]).toFixed(2)+"%"),r.a.createElement(x.a,{align:"center"},(100*e[3]).toFixed(2)+"%"),r.a.createElement(x.a,{align:"center"},(100*e[4]).toFixed(2)+"%"),r.a.createElement(x.a,{align:"center"},(100*e[5]).toFixed(2)+"%"),r.a.createElement(x.a,{align:"center"},(100*e[6]).toFixed(2)+"%")),r.a.createElement(_.a,null,r.a.createElement(x.a,{align:"center"},r.a.createElement(J.a,null,r.a.createElement(K.a,{name:"cardiomegaly",onChange:function(e){return a.feedbackChangeHandler(e)}},r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"Yes",value:"Yes"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"No",value:"No"})))),r.a.createElement(x.a,{align:"center"},r.a.createElement(J.a,null,r.a.createElement(K.a,{name:"edema",onChange:function(e){return a.feedbackChangeHandler(e)}},r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"Yes",value:"Yes"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"No",value:"No"})))),r.a.createElement(x.a,{align:"center"},r.a.createElement(J.a,null,r.a.createElement(K.a,{name:"consolidation",onChange:function(e){return a.feedbackChangeHandler(e)}},r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"Yes",value:"Yes"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"No",value:"No"})))),r.a.createElement(x.a,{align:"center"},r.a.createElement(J.a,null,r.a.createElement(K.a,{name:"atelectasis",onChange:function(e){return a.feedbackChangeHandler(e)}},r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"Yes",value:"Yes"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"No",value:"No"})))),r.a.createElement(x.a,{align:"center"},r.a.createElement(J.a,null,r.a.createElement(K.a,{name:"pleural_effusion",onChange:function(e){return a.feedbackChangeHandler(e)}},r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"Yes",value:"Yes"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,null),label:"No",value:"No"}))))))))))))}return a.setState({open:!0,alertMessage:"Error occured, contact system admin"}),a.alert()},a.feedbackChangeHandler=function(e){var t=e.target,n=t.name,r=t.value;a.setState({feedback:Object(b.a)({},a.state.feedback,Object(y.a)({},n,r))})},a.submitFeedback=function(){a.props.resultAction(!1),a.setState({loading:!0}),fetch(w+"/feedback/"+a.state.responseData.feedbackResponseId,{method:"PUT",mode:"cors",body:JSON.stringify({feedback:a.state.feedback}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?a.setState({loading:!1,feedbackSubmitted:!0,selectedFile:null,responseData:null,preview:null,limit:!1,open:!0,alertMessage:"feedback added successfully"}):a.setState({loading:!1,selectedFile:null,responseData:null,preview:null,limit:!1,open:!0,alertMessage:"error while submitting feedback"})}))},a.state={selectedXrayFile:null,selectedReportFile:null,responseData:null,loading:!0,xrayPreview:null,xrayFileName:null,reportPreview:null,reportFileName:null,limit:!1,invalidFile:null,open:!1,alertMessage:"",isFeedbackSet:!1,feedback:{cardiomegaly:null,edema:null,consolidation:null,atelectasis:null,pleural_effusion:null},feedbackSubmitted:!1,inputSelection:0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log(sessionStorage),sessionStorage.getItem("Login")&&"1"===sessionStorage.getItem("is_radiologist")?(console.log("Inside..."),window.location.replace("/#/radiology")):this.setState({loading:!1})}},{key:"render",value:function(){return this.props.history.history?r.a.createElement(R,null):this.state.loading?r.a.createElement(k.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},r.a.createElement(T.a,{disableShrink:!0})):this.props.result.result?this.result():this.state.limit?r.a.createElement(k.a,{container:!0,justify:"center",direction:"column",alignItems:"center",style:{minHeight:"80vh"}},r.a.createElement(S.a,{variant:"h4"},"You have reached max limit. Please contact admin"),r.a.createElement("br",null),r.a.createElement(N.a,{onClick:this.goHome},"Home")):this.uploadImage()}}]),t}(n.Component),re=Object(d.b)((function(e){return{userId:e.userId,history:e.history,result:e.result,login:e.login}}),(function(e){return{loginAction:function(t){e(g(t))},userAction:function(t){e(E(t))},userNameAction:function(t){e(p(t))},resultAction:function(t){e(h(t))}}}))(Object(P.a)((function(e){return{upload:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"5%"}}}))(ne)),le=a(497),oe=(a(430),a(431),a(441),a(494)),ie=a(495),ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).header=function(){return r.a.createElement("div",null,r.a.createElement(oe.a,{position:"fixed"},r.a.createElement(ie.a,null,r.a.createElement(S.a,{variant:"h6",style:{flexGrow:1}},"Smart X-Ray ",r.a.createElement("sup",null,"BETA")),r.a.createElement(N.a,{color:"inherit",onClick:a.logout},a.props.login.login||sessionStorage.getItem("Login")?"SIGNOUT":""))),r.a.createElement(ie.a,null))},a.logout=function(){sessionStorage.clear(),a.props.loginAction(!1),a.props.historyAction(!1),window.location.replace("/")},a.state={open:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.header()}}]),t}(n.Component),se=Object(d.b)((function(e){return{login:e.login,history:e.history,userName:e.userName}}),(function(e){return{loginAction:function(t){e(g(t))},historyAction:function(t){e(f(t))},resultAction:function(t){e(h(t))}}}))(Object(P.a)((function(e){return{toolbar:e.mixins.toolbar,drawer:{width:250}}}))(ce)),me=(Object(te.a)("input")({display:"none"}),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).calculate=function(e){a.setState({loading:!0}),fetch(w+"/userInput",{method:"PUT",mode:"cors",body:JSON.stringify({cardiomegaly:a.state.cardiomegaly,edema:a.state.edema,consolidation:a.state.consolidation,atelectasis:a.state.atelectasis,pleural_effusion:a.state.pleural_effusion,active_tuberculosis:a.state.active_tuberculosis,healed_tuberculosis:a.state.healed_tuberculosis,metastasis:a.state.metastasis,mass_lesion:a.state.mass_lesion,calcification:a.state.calcification,none:a.state.none,userAccessId:e}),headers:{"Content-Type":"application/json","x-access-token":sessionStorage.getItem("access_token"),"x-refresh-token":sessionStorage.getItem("refresh_token")}}).then((function(e){return 401===e.status&&(sessionStorage.clear(),a.props.loginAction(!1),window.location.replace("/")),e.json()})).then((function(e){console.log(e),e.access_token&&sessionStorage.setItem("access_token",e.access_token),500===e.status?a.setState({loading:!1,open:!0,alertMessage:"Something went wrong, please contact system admin"}):(a.setState({loading:!1,open:!0,alertMessage:"Response submitted successfully",index:a.state.index+1,inputSelection:0,cardiomegaly:void 0,edema:void 0,consolidation:void 0,atelectasis:void 0,pleural_effusion:void 0,active_tuberculosis:void 0,healed_tuberculosis:void 0,metastasis:void 0,mass_lesion:void 0,calcification:void 0,none:void 0}),console.log(a.state))})).catch((function(e){return console.log(e)}))},a.radiology=function(){for(var e=a.state,t=e.data,n=e.index;n<t.length;){var l=t[n],o=new XMLHttpRequest;if(o.open("HEAD",w+"/"+l.image_path.split(".")[0]+"."+l.image_path.split(".")[1],!1),o.send(),"404"!=o.status)return r.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},r.a.createElement(k.a,{container:!0,item:!0,sm:!0,direction:"row",justify:"center",alignItems:"center",wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},r.a.createElement("img",{id:"target",src:w+"/"+l.processed_image_path,style:{maxWidth:"100%"},alt:"image"})),r.a.createElement(k.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},null===l.report_path?r.a.createElement(S.a,{variant:"h6"}," No report available "):r.a.createElement("a",{href:w+"/"+l.report_path,target:"_blank"},"Report")),r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"flex-start",alignItems:"stretch",sm:!0,wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(S.a,{variant:"h4"},"Level 1 Input"),r.a.createElement("br",null)),r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap",style:{marginLeft:"5%"}},r.a.createElement(U.a,null,r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"cardiomegaly",checked:1===l.cardiomegaly,disabled:!0}),label:"Cardiomegaly"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"edema",checked:1===l.edema,disabled:!0}),label:"Edema"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"consolidation",checked:1===l.consolidation,disabled:!0}),label:"Consolidation"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"atelectasis",checked:1===l.atelectasis,disabled:!0}),label:"Atelectasis"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"pleural_effusion",checked:1===l.pleural_effusion,disabled:!0}),label:"Pleural Effusion"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"active_tuberculosis",checked:1===l.active_tuberculosis,disabled:!0}),label:"Active Tuberculosis"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"healed_tuberculosis",checked:1===l.healed_tuberculosis,disabled:!0}),label:"Healed Tuberculosis"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"metastasis",checked:1===l.metastasis,disabled:!0}),label:"Metastasis"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"mass_lesion",checked:1===l.mass_lesion,disabled:!0}),label:"Mass Lesion"}),r.a.createElement(O.a,{control:r.a.createElement(A.a,{color:"primary",name:"calcification",checked:1===l.calcification,disabled:!0}),label:"Calcification"}))))),r.a.createElement(k.a,{container:!0,item:!0,sm:!0,direction:"column",wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"flex-start",alignItems:"stretch",sm:!0,wrap:"wrap"},r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(S.a,{variant:"h4"},"Please select the condition(s) for the uploaded X-Ray"),r.a.createElement("br",null)),r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(U.a,null,r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"cardiomegaly",onChange:a.onChange}),label:"Cardiomegaly"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"edema",onChange:a.onChange}),label:"Edema"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"consolidation",onChange:a.onChange}),label:"Consolidation"})),r.a.createElement(U.a,null,r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"atelectasis",onChange:a.onChange}),label:"Atelectasis"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"pleural_effusion",onChange:a.onChange}),label:"Pleural Effusion"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"active_tuberculosis",onChange:a.onChange}),label:"Active Tuberculosis"})),r.a.createElement(U.a,null,r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"healed_tuberculosis",onChange:a.onChange}),label:"Healed Tuberculosis"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"metastasis",onChange:a.onChange}),label:"Metastasis"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"mass_lesion",onChange:a.onChange}),label:"Mass Lesion"})),r.a.createElement(U.a,null,r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"calcification",onChange:a.onChange}),label:"Calcification"}),r.a.createElement(O.a,{control:r.a.createElement(F.a,{color:"primary",name:"none",onChange:a.onChange}),label:"None"}))))),r.a.createElement(k.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},r.a.createElement(N.a,{type:"submit",disabled:0==a.state.inputSelection,onClick:function(){a.calculate(l.id),n++},variant:"contained",style:{marginRight:"2.5%",marginTop:"1%"}},"Submit"),r.a.createElement(N.a,{type:"reset",onClick:a.goHome,variant:"contained",style:{marginLeft:"2.5%",marginTop:"1%"}},"Cancel"))),a.alert()));n++}return r.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},r.a.createElement(k.a,{container:!0,item:!0,direction:"column",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},r.a.createElement(S.a,{variant:"h3"},"Nothing to show")))},a.goHome=function(){window.location.reload()},a.onChange=function(e){var t;a.setState(Object(b.a)({},a.state,(t={},Object(y.a)(t,e.target.name,e.target.checked),Object(y.a)(t,"inputSelection",!0===e.target.checked?a.state.inputSelection+1:0===a.state.inputSelection?0:a.state.inputSelection-1),t)))},a.alert=function(){return r.a.createElement(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a.state.open,onClose:function(){return a.setState({open:!a.state.open})},autoHideDuration:2e3,message:a.state.alertMessage})},a.state={responseData:null,loading:!0,open:!1,alertMessage:"",inputSelection:0,pageNumber:null,data:[],index:0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.historyAction(!1),fetch(w+"/userInput",{method:"GET",mode:"cors",headers:{Accept:"application/form-data","Access-Control-Allow-Origin":"*"}}).then((function(t){return 401===t.status&&(sessionStorage.clear(),e.props.loginAction(!1),window.location.replace("/")),t.json()})).then((function(t){console.log(t),t.access_token&&sessionStorage.setItem("access_token",t.access_token),sessionStorage.setItem("Login",!0),e.setState({data:t,loading:!1})}))}},{key:"render",value:function(){return this.state.loading?r.a.createElement(k.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},r.a.createElement(T.a,{disableShrink:!0})):this.radiology()}}]),t}(n.Component)),ue=Object(d.b)((function(e){return{userId:e.userId,history:e.history,result:e.result,login:e.login}}),(function(e){return{loginAction:function(t){e(g(t))},historyAction:function(t){e(f(t))},userAction:function(t){e(E(t))},userNameAction:function(t){e(p(t))},resultAction:function(t){e(h(t))}}}))(Object(P.a)((function(e){return{upload:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"5%"}}}))(me)),de=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).alert=function(){return r.a.createElement(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a.state.open,onClose:function(){return a.setState({open:!a.state.open})},autoHideDuration:3e3,message:a.state.alertMessage})},a.ckeckInput=function(e){""!==a.state.username&&""!==a.state.password||(a.props.loginAction(!1),a.setState({open:!0,alertMessage:e,loading:!1}))},a.onSubmit=function(){a.setState({loading:!0}),a.ckeckInput("username or password cannot be empty"),fetch(w+"/login",{method:"POST",mode:"cors",body:JSON.stringify({username:a.state.username,password:a.state.password}),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then((function(e){return 200===e.status&&a.props.loginAction(!0),e.json()})).then((function(e){null===e.data?a.setState({loading:!1,open:!0,alertMessage:e.message}):(a.props.userAction(e.data.id),a.props.userNameAction(e.data.username),sessionStorage.setItem("Login",a.props.login.login),sessionStorage.setItem("UserId",e.data.id),sessionStorage.setItem("UserName",e.data.username),a.setState({loading:!1}))})).catch((function(e){return console.log(e)}))},a.login=function(){return r.a.createElement(k.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"80vh"}},r.a.createElement(le.a,{margin:"normal",color:"primary",onChange:function(e){a.setState({username:e.target.value})},label:"Username",id:"outlined-size-normal",variant:"outlined",fullWidth:!1}),r.a.createElement("br",null),r.a.createElement(le.a,{color:"primary",onChange:function(e){a.setState({password:e.target.value})},label:"Password",id:"outlined-size-normal",variant:"outlined",fullWidth:!1,type:"password"}),r.a.createElement("br",null),r.a.createElement(N.a,{onClick:a.onSubmit,color:"primary"},"Login"),a.alert())},a.state={username:"",password:"",loading:!1,open:!1,alertMessage:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.loading?r.a.createElement(k.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},r.a.createElement(T.a,{disableShrink:!0})):sessionStorage.getItem("Login")?r.a.createElement(re,null):this.login()}}]),t}(n.Component),ge=Object(d.b)((function(e){return{login:e.login}}),(function(e){return{loginAction:function(t){e(g(t))},userAction:function(t){e(E(t))},userNameAction:function(t){e(p(t))}}}))(Object(P.a)((function(e){return{login:{alignContent:"center",alignItems:"center",justifyContent:"center"}}}))(de));var pe=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(se,null),r.a.createElement(ge,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee=a(57),fe={login:!1,loading:!1},he=Object(Ee.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(b.a)({},e,{login:t.payload});default:return e}},userName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_NAME":return Object(b.a)({},e,{userName:t.payload});default:return e}},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ID":return Object(b.a)({},e,{userId:t.payload});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HISTORY":return Object(b.a)({},e,{history:t.payload});default:return e}},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESULT":return Object(b.a)({},e,{result:t.payload});default:return e}}}),ye=a(204),be=Object(Ee.createStore)(he,Object(ye.composeWithDevTools)()),ve=a(129),we=a(14),Ce=a(496),ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).alert=function(){return r.a.createElement(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a.state.open,onClose:function(){return a.setState({open:!a.state.open})},autoHideDuration:3e3,message:a.state.alertMessage})},a.ckeckInput=function(e){""!==a.state.username&&""!==a.state.password&&""!==a.state.email||a.setState({open:!0,alertMessage:e,loading:!1})},a.onSubmit=function(){a.setState({loading:!0}),a.ckeckInput("All fields are mendatory"),fetch(w+"/signup",{method:"POST",mode:"cors",body:JSON.stringify({username:a.state.username,password:a.state.password,email:a.state.email,is_radiologist:a.state.is_radiologist}),headers:{"Content-Type":"application/json"}}).then((function(e){return a.setState({loading:!1}),e.json()})).then((function(e){a.setState({open:!0,alertMessage:e.message})})).catch((function(e){return console.log(e)}))},a.onChange=function(e){a.setState(Object(b.a)({},a.state,Object(y.a)({},e.target.name,e.target.checked)))},a.signup=function(){return r.a.createElement("form",null,r.a.createElement(k.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"80vh"}},r.a.createElement(k.a,{item:!0},r.a.createElement(le.a,{margin:"normal",color:"primary",onChange:function(e){a.setState({username:e.target.value})},label:"Username",id:"outlined-size-normal",variant:"outlined",fullWidth:!1})),r.a.createElement(k.a,{item:!0},r.a.createElement(le.a,{margin:"normal",color:"primary",onChange:function(e){a.setState({email:e.target.value})},label:"Eamil",id:"outlined-size-normal",variant:"outlined",fullWidth:!1})),r.a.createElement(k.a,{item:!0},r.a.createElement(le.a,{margin:"normal",color:"primary",onChange:function(e){a.setState({password:e.target.value})},label:"Password",id:"outlined-size-normal",variant:"outlined",fullWidth:!1,type:"password"})),r.a.createElement(k.a,{item:!0},r.a.createElement(J.a,{margin:"normal"},r.a.createElement(O.a,{control:r.a.createElement(Ce.a,{color:"primary"}),name:"is_radiologist",defaultValue:"false",onChange:a.onChange,labelPlacement:"start",label:"Radiologist"}))),r.a.createElement(N.a,{onClick:a.onSubmit,color:"primary"},"Signup"),r.a.createElement(S.a,null,"Already have account? Login ",r.a.createElement("a",{href:"/"},"here ")),a.alert()))},a.state={username:"",password:"",email:"",is_radiologist:!1,loading:!1,open:!1,alertMessage:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.loading?r.a.createElement(k.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},r.a.createElement(T.a,{disableShrink:!0})):this.signup()}}]),t}(n.Component);Object(d.b)((function(e){return{login:e.login}}),(function(e){return{loginAction:function(t){e(g(t))},userAction:function(t){e(E(t))},userNameAction:function(t){e(p(t))}}}))(Object(P.a)((function(e){return{login:{alignContent:"center",alignItems:"center",justifyContent:"center"}}}))(ke));o.a.render(r.a.createElement(d.a,{store:be},r.a.createElement(ve.a,null,r.a.createElement(we.c,null,r.a.createElement(we.a,{path:"/",element:r.a.createElement(pe,null)}),r.a.createElement(we.a,{path:"/radiology",element:r.a.createElement(n.Fragment,null,r.a.createElement(se,null)," ",r.a.createElement(ue,null))}),r.a.createElement(we.a,{path:"/history",element:r.a.createElement(n.Fragment,null,r.a.createElement(se,null)," ",r.a.createElement(R,null))})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[240,1,2]]]);
//# sourceMappingURL=main.46a2edbd.chunk.js.map