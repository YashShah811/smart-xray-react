(this.webpackJsonpsmartxray=this.webpackJsonpsmartxray||[]).push([[0],{192:function(e,t){},245:function(e,t,a){e.exports=a(447)},250:function(e,t,a){},251:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},436:function(e,t,a){},441:function(e,t){},442:function(e,t){},443:function(e,t){},444:function(e,t){},445:function(e,t){},447:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(19),o=a.n(r),i=(a(250),a(251),a(41)),c=a(42),s=a(44),m=a(43),u=a(36),d=function(e){return{type:"LOGIN",payload:e}},g=function(e){return{type:"HISTORY",payload:e}},p=function(e){return{type:"RESULT",payload:e}},f=a(37),E=a(22),h=(a(256),a(207)),y=(a(257),"https://xray1.deepnets.in"),b=a(24),v=a(478),w=a(135),C=a(482),j=a(483),k=a(484),S=a(485),x=a(486),F=a(506),I=a(507),O=a(488),_=a(500),N=a(503),H=a(490),A=a(5),R=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).history=function(){return l.a.createElement(v.a,{container:!0,justify:"center"},n.state.data.map((function(e,t){var a=[{name:"Cardiomegaly",value:(100*e.cardiomegaly).toFixed(2),threshold:46.52},{name:"Edema",value:(100*e.edema).toFixed(2),threshold:71.05},{name:"Consolidation",value:(100*e.consolidation).toFixed(2),threshold:65.9},{name:"Atelectasis",value:(100*e.atelectasis).toFixed(2),threshold:54.93},{name:"Pleural Effusion",value:(100*e.pleural_effusion).toFixed(2),threshold:34.61}],r=["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921"];return l.a.createElement(v.a,{container:!0,item:!0,xs:12,style:{background:"aliceblue",marginTop:"1%"}},l.a.createElement(v.a,{item:!0,xs:12},l.a.createElement(w.a,{variant:"h5",color:"primary",align:"center"},new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(new Date(e.access_dts)))),l.a.createElement(v.a,{item:!0,xs:4},l.a.createElement("img",{style:{display:"block",marginRight:"auto",marginLeft:"auto"},src:y+"/"+e.image_path.split(".")[0]+"_"+localStorage.getItem("UserId")+"."+e.image_path.split(".")[1],alt:"",width:400,height:400})),l.a.createElement(v.a,{item:!0,xs:8},l.a.createElement(b.c,{style:{fontSize:"calc(5px + 2vmin)"},width:1e3,height:400,data:a},l.a.createElement(b.h,{tick:!1}),l.a.createElement(b.i,null),l.a.createElement(b.d,{align:"right",layout:"vertical",verticalAlign:"middle",content:function(){return l.a.createElement("ul",null,a.map((function(e,t){return l.a.createElement("li",{key:t,style:{color:r[t],listStyleType:"square"}},l.a.createElement("p",{style:{color:"black"}},e.name))})))}}),l.a.createElement(b.a,{dataKey:"value"},a.map((function(e,t){return l.a.createElement(b.b,{key:"cell-".concat(t),fill:r[t],stroke:r[t]})}))),l.a.createElement(b.e,{dataKey:"threshold"}))),l.a.createElement(v.a,{container:!0,item:!0,xs:4,alignContent:"center",alignItems:"center",justify:"center"},l.a.createElement(C.a,{onClick:function(){return n.updateFeedbackHandler(t,e.userFeedback.id)}},"Update feedback")),l.a.createElement(v.a,{container:!0,item:!0,xs:8},l.a.createElement(j.a,{style:{border:"2px solid black",marginRight:"2%",marginBottom:"2%"}},l.a.createElement(k.a,null,l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},"Cardiomegaly"),l.a.createElement(x.a,{align:"center"},"Edema"),l.a.createElement(x.a,{align:"center"},"Consolidation"),l.a.createElement(x.a,{align:"center"},"Atelectasis"),l.a.createElement(x.a,{align:"center"},"Pleural effusion")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},(100*e.cardiomegaly).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.edema).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.consolidation).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.atelectasis).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.pleural_effusion).toFixed(2)+"%")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"cardiomegaly",value:e.userFeedback.cardiomegaly,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"edema",value:e.userFeedback.edema,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"consolidation",value:e.userFeedback.consolidation,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"atelectasis",value:e.userFeedback.atelectasis,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"pleural_effusion",value:e.userFeedback.pleural_effusion,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))))))))})),n.alert())},n.alert=function(){return l.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:2e3,message:n.state.message})},n.feedbackChangeHandler=function(e,t){var a=e.target,l=a.name,r=a.value,o=n.state.data.findIndex((function(e){return e.userFeedback.user_access_details_id===t})),i=Object(h.a)(n.state.data);i[o].userFeedback=Object(E.a)(Object(E.a)({},i[o].userFeedback),{},Object(f.a)({},l,r)),n.setState({data:i})},n.updateFeedbackHandler=function(e,t){n.setState({loading:!0}),fetch(y+"/feedback/"+t,{method:"PUT",mode:"cors",body:JSON.stringify({feedback:n.state.data[e].userFeedback}),headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),200===e.status?n.setState({loading:!1,open:!0,message:"Feedback successfully updated"}):n.setState({loading:!1,open:!0,message:"Error in updating feedback, try after some time"})})).catch((function(e){n.setState({loading:!1,open:!0,message:e})}))},n.home=function(){n.props.historyAction(!1),n.setState({home:!0})},n.state={data:[],key:[],home:!1,loading:!1,open:!1,message:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),fetch(y+"/history/"+sessionStorage.getItem("UserId"),{method:"GET",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(t){e.setState({data:t.data,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(H.a,{disableShrink:!0})):this.state.home?l.a.createElement(V,null):this.history()}}]),a}(n.Component),D=Object(u.b)((function(e){return{userId:e.userId}}),(function(e){return{historyAction:function(t){e(g(t))}}}))(Object(A.a)((function(e){return{offset:e.mixins.toolbar,root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},img:{margin:"auto",display:"block",maxWidth:"400",maxHeight:"400"},item:{alignContent:"center",alignItems:"center",justifyContent:"center"}}}))(R)),P=a(504),T=a(492),M=a(493),Y=a(494),U=a(495),L=a(496),W=a(508),B=46.52,G=67.46,X=65.9,z=54.93,J=43.74,K=a(505),q=a(491),$=Object(q.a)("input")({display:"none"}),Q=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onChangeHandlerXray=function(e){var t=new FileReader,a=e.target.files[0];if(n.setState({selectedXrayFile:null,xrayPreview:null,xrayFileName:null}),a){var l=e.target.files[0].name;console.log(l);var r=l.substring(l.lastIndexOf(".")+1);"dcm"===r||"DCM"===r||"jpg"===r?(t.onloadend=function(){n.setState({invalidFile:!1,selectedXrayFile:a,xrayPreview:t.result,xrayFileName:l})},t.readAsDataURL(a)):n.setState({invalidFile:!0,open:!0,alertMessage:"Please upload valid xray"})}},n.onChangeHandlerReport=function(e){var t=new FileReader,a=e.target.files[0];if(n.setState({selectedReportFile:null,reportPreview:null,reportFileName:null}),a){var l=e.target.files[0].name;console.log(l);var r=l.substring(l.lastIndexOf(".")+1);"pdf"===r||"PDF"===r?(t.onloadend=function(){n.setState({invalidFile:!1,selectedReportFile:a,reportPreview:t.result,reportFileName:l})},t.readAsDataURL(a)):n.setState({open:!0,alertMessage:"Please upload valid report",invalidFile:!0})}},n.calculate=function(){if(console.log("State: ",n.state),n.setState({loading:!0}),null===n.state.selectedFile)alert("Please select file."),n.setState({loading:!1,open:!0,alertMessage:"Please select file."});else{var e={xray:n.state.selectedXrayFile,report:n.state.selectedReportFile},t=new FormData;t.append("xray",e.xray),t.append("report",e.report),t.append("cardiomegaly",n.state.cardiomegaly),t.append("edema",n.state.edema),t.append("consolidation",n.state.consolidation),t.append("atelectasis",n.state.atelectasis),t.append("pleural_effusion",n.state.pleural_effusion),t.append("none",n.state.none),fetch(y+"/calculate/"+sessionStorage.getItem("UserId"),{method:"POST",mode:"cors",body:t,headers:{Accept:"application/form-data","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){null===e.data?n.setState({loading:!1,limit:!0}):n.setState({loading:!1,responseData:e.data,xrayPreview:null,selectedXrayFile:null,xrayFileName:null,reportPreview:null,selectedReportFile:null,reportFileName:null,open:!0,alertMessage:"File submitted successfully"})})).catch((function(e){return console.log(e)}))}},n.uploadImage=function(){return l.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},l.a.createElement(v.a,{container:!0,item:!0,direction:"row",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},l.a.createElement(v.a,{container:!0,item:!0,sm:3,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement(w.a,{style:{padding:"5px 10px"},variant:"h4"},"Instructions"),l.a.createElement(w.a,{style:{padding:"2px"}},"Sample xray"),l.a.createElement("img",{id:"target",src:y+"/sample.jpg",style:{maxWidth:"100%"},alt:"sample image"}),l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,"Only dcm files are valid for xray"),l.a.createElement("li",null,"Only pdf files are valid for report"),l.a.createElement("li",null,"Please upload properly cropped and aligned image",l.a.createElement("br",null),"(Refer to the sample xray)"),l.a.createElement("li",null,"Please upload only black and white xray image"),l.a.createElement("li",null,"Only chest xrays are supported")))),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement("label",{htmlFor:"upload-button-xray"},l.a.createElement($,{color:"primary",id:"upload-button-xray",type:"file",onChange:n.onChangeHandlerXray}),l.a.createElement(C.a,{variant:"contained",endIcon:l.a.createElement(K.a,null),component:"span"},"Upload X-Ray")),l.a.createElement("img",{id:"target-xray",src:n.state.xrayPreview,style:{maxWidth:320,maxHeight:320},alt:n.state.xrayFileName})),l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement("label",{htmlFor:"upload-button-report"},l.a.createElement($,{color:"primary",id:"upload-button-report",type:"file",onChange:n.onChangeHandlerReport}),l.a.createElement(C.a,{variant:"contained",endIcon:l.a.createElement(K.a,null),component:"span"},"Report")),l.a.createElement("img",{id:"target-report",src:n.state.reportPreview,style:{maxWidth:320,maxHeight:320},alt:n.state.reportFileName})))),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap"},l.a.createElement(C.a,{type:"submit",disabled:n.state.invalidFile||null===n.state.selectedXrayFile||null===n.state.selectedReportFile,onClick:n.calculate,variant:"contained",style:{marginRight:"5%",marginTop:"7.5%"}},"Submit"),l.a.createElement(C.a,{type:"reset",onClick:n.goHome,variant:"contained"},"Cancel"))),n.alert()))},n.goHome=function(){window.location.reload()},n.onChange=function(e){var t;n.setState(Object(E.a)(Object(E.a)({},n.state),{},(t={},Object(f.a)(t,e.target.name,e.target.checked),Object(f.a)(t,"inputSelection",!0===e.target.checked?n.state.inputSelection+1:0===n.state.inputSelection?0:n.state.inputSelection-1),t)))},n.alert=function(){return l.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:2e3,message:n.state.alertMessage})},n.result=function(){if("true"===n.state.responseData.isError&&"Raising error: unwantedImage"==n.state.responseData.message)return l.a.createElement(P.a,{open:"true"===n.state.responseData.isError&&"Raising error: unwantedImage"==n.state.responseData.message,onClose:n.goHome},l.a.createElement(T.a,{style:{backgroundColor:"#3F51B5",color:"white"}},"Invalid Image"),l.a.createElement(M.a,{style:{marginTop:20}},l.a.createElement(Y.a,{color:"black"},"Please upload valid chest x-ray image.")),l.a.createElement(U.a,null,l.a.createElement(C.a,{onClick:n.goHome},"OK")));if("false"===n.state.responseData.isError){var e=n.state.responseData.result,t=[{name:"Cardiomegaly",value:(100*e[2]).toFixed(2),threshold:B},{name:"Edema",value:(100*e[3]).toFixed(2),threshold:G},{name:"Consolidation",value:(100*e[4]).toFixed(2),threshold:X},{name:"Atelectasis",value:(100*e[5]).toFixed(2),threshold:z},{name:"Pleural Effusion",value:(100*e[6]).toFixed(2),threshold:J}],a=["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921"];return l.a.createElement("div",{style:{flexGrow:1,padding:"5%"}},l.a.createElement(v.a,{container:!0,justify:"center",wrap:"wrap",spacing:1,direction:"column"},l.a.createElement(v.a,{item:!0,sm:!0,container:!0,wrap:"wrap",justify:"center",alignItems:"center",spacing:1},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},l.a.createElement("img",{src:y+"/"+e[1].split(".")[0]+"_"+sessionStorage.getItem("UserId")+"."+e[1].split(".")[1],style:{maxWidth:"100%"},alt:""})),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},l.a.createElement(L.a,null,l.a.createElement(b.f,{height:400,minWidth:700},l.a.createElement(b.c,{data:t},l.a.createElement(b.h,{dataKey:"name"}),l.a.createElement(b.i,null),l.a.createElement(b.g,null),l.a.createElement(b.d,{align:"center",verticalAlign:"bottom",content:function(){return l.a.createElement(W.a,{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingLeft:"10%"}},l.a.createElement("li",{style:{color:"black",listStyleType:"square",marginRight:"5%"}},l.a.createElement(w.a,{variant:"caption",style:{color:"black"}},"cut-off line")))}}),l.a.createElement(b.a,{dataKey:"value"},t.map((function(e,t){return l.a.createElement(b.b,{key:"cell-".concat(t),fill:a[t],stroke:a[t]})}))),l.a.createElement(b.e,{dataKey:"threshold",stroke:"black"})))))),l.a.createElement(v.a,{item:!0,sm:!0,container:!0,wrap:"wrap",alignContent:"center",alignItems:"center",justify:"center",spacing:1},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},l.a.createElement("ul",null,l.a.createElement("li",null,"Bar graph of any condition above the cut-off line indicates the positive result of that condition in the supplied xray"),l.a.createElement("li",null,"Please submit your analysis of xray conditions through the table below the graph."),l.a.createElement("li",null,"Select Yes/No for all conditions and press 'Submit Feedback' button"),l.a.createElement("li",null,"Please refrain from submitting incomplete/wrong feedback")),l.a.createElement(C.a,{variant:"contained",onClick:n.submitFeedback,disabled:null===n.state.feedback.cardiomegaly||null===n.state.feedback.edema||null===n.state.feedback.consolidation||null===n.state.feedback.atelectasis||null===n.state.feedback.pleural_effusion},"Submit feedback")),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,wrap:"wrap"},l.a.createElement(L.a,null,l.a.createElement(j.a,{style:{border:"2px solid black",minWidth:650}},l.a.createElement(k.a,null,l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},"Cardiomegaly"),l.a.createElement(x.a,{align:"center"},"Edema"),l.a.createElement(x.a,{align:"center"},"Consolidation"),l.a.createElement(x.a,{align:"center"},"Atelectasis"),l.a.createElement(x.a,{align:"center"},"Pleural effusion")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},(100*e[2]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[3]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[4]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[5]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[6]).toFixed(2)+"%")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"cardiomegaly",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"edema",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"consolidation",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"atelectasis",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(F.a,null,l.a.createElement(I.a,{name:"pleural_effusion",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"}))))))))))))}return n.setState({open:!0,alertMessage:"Error occured, contact system admin"}),n.alert()},n.feedbackChangeHandler=function(e){var t=e.target,a=t.name,l=t.value;n.setState({feedback:Object(E.a)(Object(E.a)({},n.state.feedback),{},Object(f.a)({},a,l))})},n.submitFeedback=function(){n.props.resultAction(!1),n.setState({loading:!0}),fetch(y+"/feedback/"+n.state.responseData.feedbackResponseId,{method:"PUT",mode:"cors",body:JSON.stringify({feedback:n.state.feedback}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?n.setState({loading:!1,feedbackSubmitted:!0,selectedFile:null,responseData:null,preview:null,limit:!1,open:!0,alertMessage:"feedback added successfully"}):n.setState({loading:!1,selectedFile:null,responseData:null,preview:null,limit:!1,open:!0,alertMessage:"error while submitting feedback"})}))},n.state={selectedXrayFile:null,selectedReportFile:null,responseData:null,loading:!1,xrayPreview:null,xrayFileName:null,reportPreview:null,reportFileName:null,limit:!1,invalidFile:null,open:!1,alertMessage:"",isFeedbackSet:!1,feedback:{cardiomegaly:null,edema:null,consolidation:null,atelectasis:null,pleural_effusion:null},feedbackSubmitted:!1,inputSelection:0},n}return Object(c.a)(a,[{key:"render",value:function(){return this.props.history.history?l.a.createElement(D,null):this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(H.a,{disableShrink:!0})):this.props.result.result?this.result():this.state.limit?l.a.createElement(v.a,{container:!0,justify:"center",direction:"column",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(w.a,{variant:"h4"},"You have reached max limit. Please contact admin"),l.a.createElement("br",null),l.a.createElement(C.a,{onClick:this.goHome},"Home")):this.uploadImage()}}]),a}(n.Component),V=Object(u.b)((function(e){return{userId:e.userId,history:e.history,result:e.result}}),(function(e){return{resultAction:function(t){e(p(t))}}}))(Object(A.a)((function(e){return{upload:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"5%"}}}))(Q)),Z=a(499),ee=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).alert=function(){return l.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:3e3,message:n.state.alertMessage})},n.ckeckInput=function(e){""!==n.state.username&&""!==n.state.password||(n.props.loginAction(!1),n.setState({open:!0,alertMessage:e,loading:!1}))},n.onSubmit=function(){n.setState({loading:!0}),n.ckeckInput("username or password cannot be empty"),fetch(y+"/login",{method:"POST",mode:"cors",body:JSON.stringify({username:n.state.username,password:n.state.password}),headers:{"Content-Type":"application/json"}}).then((function(e){return 200===e.status&&n.props.loginAction(!0),e.json()})).then((function(e){null===e.data?n.setState({loading:!1,open:!0,alertMessage:e.message}):(n.props.userAction(e.data.id),n.props.userNameAction(e.data.username),sessionStorage.setItem("Login",n.props.login.login),sessionStorage.setItem("UserId",e.data.id),sessionStorage.setItem("UserName",e.data.username),n.setState({loading:!1}))})).catch((function(e){return console.log(e)}))},n.login=function(){return l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(Z.a,{margin:"normal",color:"primary",onChange:function(e){n.setState({username:e.target.value})},label:"Username",id:"outlined-size-normal",variant:"outlined",fullWidth:!1}),l.a.createElement("br",null),l.a.createElement(Z.a,{color:"primary",onChange:function(e){n.setState({password:e.target.value})},label:"Password",id:"outlined-size-normal",variant:"outlined",fullWidth:!1,type:"password"}),l.a.createElement("br",null),l.a.createElement(C.a,{onClick:n.onSubmit,color:"primary"},"Login"),n.alert())},n.state={username:"",password:"",loading:!1,open:!1,alertMessage:""},n}return Object(c.a)(a,[{key:"render",value:function(){return this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(H.a,{disableShrink:!0})):sessionStorage.getItem("Login")?l.a.createElement(V,null):this.login()}}]),a}(n.Component),te=Object(u.b)((function(e){return{login:e.login}}),(function(e){return{loginAction:function(t){e(d(t))},userAction:function(t){e({type:"USER_ID",payload:t})},userNameAction:function(t){e({type:"USER_NAME",payload:t})}}}))(Object(A.a)((function(e){return{login:{alignContent:"center",alignItems:"center",justifyContent:"center"}}}))(ee)),ae=a(497),ne=a(498),le=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).header=function(){return l.a.createElement("div",null,l.a.createElement(ae.a,{position:"fixed"},l.a.createElement(ne.a,null,l.a.createElement(w.a,{variant:"h6",style:{flexGrow:1}},"Smart X-Ray ",l.a.createElement("sup",null,"BETA")),l.a.createElement(C.a,{color:"inherit",onClick:n.logout},n.props.login.login||sessionStorage.getItem("Login")?"SIGNOUT":""))),l.a.createElement(ne.a,null))},n.logout=function(){sessionStorage.clear(),n.props.loginAction(!1),n.props.historyAction(!1)},n.state={open:!1},n}return Object(c.a)(a,[{key:"render",value:function(){return this.header()}}]),a}(n.Component),re=Object(u.b)((function(e){return{login:e.login,history:e.history,userName:e.userName}}),(function(e){return{loginAction:function(t){e(d(t))},historyAction:function(t){e(g(t))},resultAction:function(t){e(p(t))}}}))(Object(A.a)((function(e){return{toolbar:e.mixins.toolbar,drawer:{width:250}}}))(le));var oe=function(){return l.a.createElement(n.Fragment,null,l.a.createElement(re,null),l.a.createElement(te,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=a(59),ce={login:!1,loading:!1},se=Object(ie.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(E.a)(Object(E.a)({},e),{},{login:t.payload});default:return e}},userName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_NAME":return Object(E.a)(Object(E.a)({},e),{},{userName:t.payload});default:return e}},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ID":return Object(E.a)(Object(E.a)({},e),{},{userId:t.payload});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HISTORY":return Object(E.a)(Object(E.a)({},e),{},{history:t.payload});default:return e}},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESULT":return Object(E.a)(Object(E.a)({},e),{},{result:t.payload});default:return e}}}),me=a(206),ue=Object(ie.createStore)(se,Object(me.composeWithDevTools)()),de=a(208),ge=a(13),pe=(a(435),a(436),a(487)),fe=a(502),Ee=(a(446),Object(q.a)("input")({display:"none"}),function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).calculate=function(e,t){n.setState({loading:!0}),fetch(y+"/userInput",{method:"PUT",mode:"cors",body:JSON.stringify({cardiomegaly:n.state.cardiomegaly,edema:n.state.edema,consolidation:n.state.consolidation,atelectasis:n.state.atelectasis,pleural_effusion:n.state.pleural_effusion,active_tuberculosis:n.state.active_tuberculosis,healed_tuberculosis:n.state.healed_tuberculosis,metastasis:n.state.metastasis,mass_lesion:n.state.mass_lesion,calcification:n.state.calcification,none:n.state.none,userAccessId:e,processedImagePath:t}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),500===e.status?n.setState({loading:!1,open:!0,alertMessage:"Something went wrong, please contact system admin"}):(n.setState({loading:!1,open:!0,alertMessage:"Response submitted successfully",index:n.state.index+1}),console.log(n.state))})).catch((function(e){return console.log(e)}))},n.radiology=function(){for(var e=n.state,t=e.data,a=e.index;a<t.length;){var r=t[a],o=new XMLHttpRequest;if(o.open("HEAD",y+"/"+r.image_path.split(".")[0]+".jpg",!1),o.send(),"404"!=o.status)return l.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"row",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement("img",{id:"target",src:y+"/"+r.image_path.split(".")[0]+".jpg",style:{maxWidth:"100%"},alt:"sample image"})),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement("a",{href:y+"/"+r.report_path,target:"_blank"},"Report"))),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"flex-start",alignItems:"stretch",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(w.a,{variant:"h4"},"Please select the condition(s) for the uploaded X-Ray"),l.a.createElement("br",null)),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(pe.a,null,l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"cardiomegaly",onChange:n.onChange}),label:"Cardiomegaly"}),l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"edema",onChange:n.onChange}),label:"Edema"}),l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"consolidation",onChange:n.onChange}),label:"Consolidation"})),l.a.createElement(pe.a,null,l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"atelectasis",onChange:n.onChange}),label:"Atelectasis"}),l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"pleural_effusion",onChange:n.onChange}),label:"Pleural Effusion"}),l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"active_tuberculosis",onChange:n.onChange}),label:"Active Tuberculosis"})),l.a.createElement(pe.a,null,l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"healed_tuberculosis",onChange:n.onChange}),label:"Healed Tuberculosis"}),l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"metastasis",onChange:n.onChange}),label:"Metastasis"}),l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"mass_lesion",onChange:n.onChange}),label:"Mass Lesion"})),l.a.createElement(pe.a,null,l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"calcification",onChange:n.onChange}),label:"Calcification"}),l.a.createElement(O.a,{control:l.a.createElement(fe.a,{color:"primary",name:"none",onChange:n.onChange}),label:"None"}))))),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap"},l.a.createElement(C.a,{type:"submit",disabled:0==n.state.inputSelection,onClick:function(){n.calculate(r.id,r.image_path.split(".")[0]+".jpg"),a++},variant:"contained",style:{marginRight:"5%",marginTop:"7.5%"}},"Submit"),l.a.createElement(C.a,{type:"reset",onClick:n.goHome,variant:"contained"},"Cancel"))),n.alert()));a++}return l.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},l.a.createElement(w.a,{variant:"h3"},"Nothing to show")))},n.goHome=function(){window.location.reload()},n.onChange=function(e){var t;n.setState(Object(E.a)(Object(E.a)({},n.state),{},(t={},Object(f.a)(t,e.target.name,e.target.checked),Object(f.a)(t,"inputSelection",!0===e.target.checked?n.state.inputSelection+1:0===n.state.inputSelection?0:n.state.inputSelection-1),t)))},n.alert=function(){return l.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:2e3,message:n.state.alertMessage})},n.state={responseData:null,loading:!0,open:!1,alertMessage:"",inputSelection:0,pageNumber:null,data:[],index:0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch(y+"/userInput",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(t){console.log(t),sessionStorage.setItem("Login",!0),e.setState({data:t,loading:!1})}))}},{key:"render",value:function(){return this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(H.a,{disableShrink:!0})):this.radiology()}}]),a}(n.Component)),he=Object(u.b)((function(e){return{userId:e.userId,history:e.history,result:e.result}}),(function(e){return{resultAction:function(t){e(p(t))}}}))(Object(A.a)((function(e){return{upload:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"5%"}}}))(Ee));o.a.render(l.a.createElement(u.a,{store:ue},l.a.createElement(de.a,null,l.a.createElement(ge.c,null,l.a.createElement(ge.a,{path:"/",element:l.a.createElement(oe,null)}),l.a.createElement(ge.a,{path:"radiology",element:l.a.createElement(n.Fragment,null,l.a.createElement(re,null)," ",l.a.createElement(he,null))})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[245,1,2]]]);
//# sourceMappingURL=main.d986c28e.chunk.js.map