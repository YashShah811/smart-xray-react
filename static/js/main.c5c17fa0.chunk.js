(this.webpackJsonpsmartxray=this.webpackJsonpsmartxray||[]).push([[0],{192:function(e,a){},245:function(e,a,t){e.exports=t(447)},250:function(e,a,t){},251:function(e,a,t){},256:function(e,a,t){},257:function(e,a,t){},436:function(e,a,t){},441:function(e,a){},442:function(e,a){},443:function(e,a){},444:function(e,a){},445:function(e,a){},447:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(19),o=t.n(r),i=(t(250),t(251),t(41)),c=t(42),s=t(44),m=t(43),u=t(36),d=function(e){return{type:"LOGIN",payload:e}},g=function(e){return{type:"HISTORY",payload:e}},p=function(e){return{type:"RESULT",payload:e}},f=t(37),E=t(22),h=(t(256),t(207)),y=(t(257),"https://xray1.deepnets.in"),b=t(24),v=t(478),w=t(135),C=t(482),j=t(483),k=t(484),S=t(485),x=t(486),I=t(506),F=t(507),O=t(488),_=t(500),N=t(503),H=t(490),A=t(5),R=function(e){Object(s.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).history=function(){return l.a.createElement(v.a,{container:!0,justify:"center"},n.state.data.map((function(e,a){var t=[{name:"Cardiomegaly",value:(100*e.cardiomegaly).toFixed(2),threshold:46.52},{name:"Edema",value:(100*e.edema).toFixed(2),threshold:71.05},{name:"Consolidation",value:(100*e.consolidation).toFixed(2),threshold:65.9},{name:"Atelectasis",value:(100*e.atelectasis).toFixed(2),threshold:54.93},{name:"Pleural Effusion",value:(100*e.pleural_effusion).toFixed(2),threshold:34.61}],r=["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921"];return l.a.createElement(v.a,{container:!0,item:!0,xs:12,style:{background:"aliceblue",marginTop:"1%"}},l.a.createElement(v.a,{item:!0,xs:12},l.a.createElement(w.a,{variant:"h5",color:"primary",align:"center"},new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(new Date(e.access_dts)))),l.a.createElement(v.a,{item:!0,xs:4},l.a.createElement("img",{style:{display:"block",marginRight:"auto",marginLeft:"auto"},src:y+"/"+e.image_path.split(".")[0]+"_"+localStorage.getItem("UserId")+"."+e.image_path.split(".")[1],alt:"",width:400,height:400})),l.a.createElement(v.a,{item:!0,xs:8},l.a.createElement(b.c,{style:{fontSize:"calc(5px + 2vmin)"},width:1e3,height:400,data:t},l.a.createElement(b.h,{tick:!1}),l.a.createElement(b.i,null),l.a.createElement(b.d,{align:"right",layout:"vertical",verticalAlign:"middle",content:function(){return l.a.createElement("ul",null,t.map((function(e,a){return l.a.createElement("li",{key:a,style:{color:r[a],listStyleType:"square"}},l.a.createElement("p",{style:{color:"black"}},e.name))})))}}),l.a.createElement(b.a,{dataKey:"value"},t.map((function(e,a){return l.a.createElement(b.b,{key:"cell-".concat(a),fill:r[a],stroke:r[a]})}))),l.a.createElement(b.e,{dataKey:"threshold"}))),l.a.createElement(v.a,{container:!0,item:!0,xs:4,alignContent:"center",alignItems:"center",justify:"center"},l.a.createElement(C.a,{onClick:function(){return n.updateFeedbackHandler(a,e.userFeedback.id)}},"Update feedback")),l.a.createElement(v.a,{container:!0,item:!0,xs:8},l.a.createElement(j.a,{style:{border:"2px solid black",marginRight:"2%",marginBottom:"2%"}},l.a.createElement(k.a,null,l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},"Cardiomegaly"),l.a.createElement(x.a,{align:"center"},"Edema"),l.a.createElement(x.a,{align:"center"},"Consolidation"),l.a.createElement(x.a,{align:"center"},"Atelectasis"),l.a.createElement(x.a,{align:"center"},"Pleural effusion")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},(100*e.cardiomegaly).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.edema).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.consolidation).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.atelectasis).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.pleural_effusion).toFixed(2)+"%")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"cardiomegaly",value:e.userFeedback.cardiomegaly,onChange:function(a){return n.feedbackChangeHandler(a,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"edema",value:e.userFeedback.edema,onChange:function(a){return n.feedbackChangeHandler(a,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"consolidation",value:e.userFeedback.consolidation,onChange:function(a){return n.feedbackChangeHandler(a,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"atelectasis",value:e.userFeedback.atelectasis,onChange:function(a){return n.feedbackChangeHandler(a,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"pleural_effusion",value:e.userFeedback.pleural_effusion,onChange:function(a){return n.feedbackChangeHandler(a,e.userFeedback.user_access_details_id)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))))))))})),n.alert())},n.alert=function(){return l.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:2e3,message:n.state.message})},n.feedbackChangeHandler=function(e,a){var t=e.target,l=t.name,r=t.value,o=n.state.data.findIndex((function(e){return e.userFeedback.user_access_details_id===a})),i=Object(h.a)(n.state.data);i[o].userFeedback=Object(E.a)(Object(E.a)({},i[o].userFeedback),{},Object(f.a)({},l,r)),n.setState({data:i})},n.updateFeedbackHandler=function(e,a){n.setState({loading:!0}),fetch(y+"/feedback/"+a,{method:"PUT",mode:"cors",body:JSON.stringify({feedback:n.state.data[e].userFeedback}),headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),200===e.status?n.setState({loading:!1,open:!0,message:"Feedback successfully updated"}):n.setState({loading:!1,open:!0,message:"Error in updating feedback, try after some time"})})).catch((function(e){n.setState({loading:!1,open:!0,message:e})}))},n.home=function(){n.props.historyAction(!1),n.setState({home:!0})},n.state={data:[],key:[],home:!1,loading:!1,open:!1,message:""},n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),fetch(y+"/history/"+sessionStorage.getItem("UserId"),{method:"GET",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(a){e.setState({data:a.data,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(H.a,{disableShrink:!0})):this.state.home?l.a.createElement(ee,null):this.history()}}]),t}(n.Component),P=Object(u.b)((function(e){return{userId:e.userId}}),(function(e){return{historyAction:function(a){e(g(a))}}}))(Object(A.a)((function(e){return{offset:e.mixins.toolbar,root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},img:{margin:"auto",display:"block",maxWidth:"400",maxHeight:"400"},item:{alignContent:"center",alignItems:"center",justifyContent:"center"}}}))(R)),D=t(487),T=t(502),M=t(504),Y=t(492),U=t(493),L=t(494),W=t(495),B=t(496),G=t(508),X=46.52,z=67.46,J=65.9,K=54.93,q=43.74,$=t(505),Q=t(491),V=Object(Q.a)("input")({display:"none"}),Z=function(e){Object(s.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).onChangeHandlerXray=function(e){var a=new FileReader,t=e.target.files[0];if(n.setState({selectedXrayFile:null,xrayPreview:null,xrayFileName:null}),t){var l=e.target.files[0].name;console.log(l);var r=l.substring(l.lastIndexOf(".")+1);"dcm"===r||"DCM"===r||"jpg"===r||"JPG"===r||"raw"===r||"RAW"===r?(a.onloadend=function(){n.setState({invalidFile:!1,selectedXrayFile:t,xrayPreview:a.result,xrayFileName:l})},a.readAsDataURL(t)):n.setState({invalidFile:!0,open:!0,alertMessage:"Please upload valid xray"})}console.log(n.state)},n.onChangeHandlerReport=function(e){var a=new FileReader,t=e.target.files[0];if(n.setState({selectedReportFile:null,reportPreview:null,reportFileName:null}),t){var l=e.target.files[0].name;console.log(l);var r=l.substring(l.lastIndexOf(".")+1);"pdf"===r||"PDF"===r?(a.onloadend=function(){n.setState({invalidFile:!1,selectedReportFile:t,reportPreview:a.result,reportFileName:l})},a.readAsDataURL(t)):n.setState({open:!0,alertMessage:"Please upload valid report",invalidFile:!0})}},n.calculate=function(){if(console.log("State: ",n.state),n.setState({loading:!0}),null===n.state.selectedFile)alert("Please select file."),n.setState({loading:!1,open:!0,alertMessage:"Please select file."});else{var e={xray:n.state.selectedXrayFile,report:n.state.selectedReportFile},a=new FormData;a.append("xray",e.xray),a.append("report",e.report),a.append("cardiomegaly",n.state.cardiomegaly),a.append("edema",n.state.edema),a.append("consolidation",n.state.consolidation),a.append("atelectasis",n.state.atelectasis),a.append("pleural_effusion",n.state.pleural_effusion),a.append("active_tuberculosis",n.state.active_tuberculosis),a.append("healed_tuberculosis",n.state.healed_tuberculosis),a.append("metastasis",n.state.metastasis),a.append("mass_lesion",n.state.mass_lesion),a.append("calcification",n.state.calcification),a.append("none",n.state.none),fetch(y+"/calculate/"+sessionStorage.getItem("UserId"),{method:"POST",mode:"cors",body:a,headers:{Accept:"application/form-data","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){null===e.data?n.setState({loading:!1,limit:!0}):n.setState({loading:!1,responseData:e.data,xrayPreview:null,selectedXrayFile:null,xrayFileName:null,reportPreview:null,selectedReportFile:null,reportFileName:null,open:!0,alertMessage:"File submitted successfully",inputSelection:0,cardiomegaly:void 0,edema:void 0,consolidation:void 0,atelectasis:void 0,pleural_effusion:void 0,active_tuberculosis:void 0,healed_tuberculosis:void 0,metastasis:void 0,mass_lesion:void 0,calcification:void 0,none:void 0})})).catch((function(e){return console.log(e)}))}},n.uploadImage=function(){return l.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},l.a.createElement(v.a,{container:!0,item:!0,direction:"row",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},l.a.createElement(v.a,{container:!0,item:!0,sm:3,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement(w.a,{style:{padding:"5px 10px"},variant:"h4"},"Instructions"),l.a.createElement(w.a,{style:{padding:"2px"}},"Sample xray"),l.a.createElement("img",{id:"target",src:y+"/sample.jpg",style:{maxWidth:"100%"},alt:"sample image"}),l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,"Only raw files are valid for xray"),l.a.createElement("li",null,"Only pdf files are valid for report"),l.a.createElement("li",null,"Please upload properly cropped and aligned image",l.a.createElement("br",null),"(Refer to the sample xray)"),l.a.createElement("li",null,"Please upload only black and white xray image"),l.a.createElement("li",null,"Only chest xrays are supported")))),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement("label",{htmlFor:"upload-button-xray"},l.a.createElement(V,{color:"primary",id:"upload-button-xray",type:"file",onChange:n.onChangeHandlerXray}),l.a.createElement(C.a,{variant:"contained",endIcon:l.a.createElement($.a,null),component:"span"},"Upload Raw File")),l.a.createElement("img",{id:"target-xray",src:n.state.xrayPreview,style:{maxWidth:320,maxHeight:320},alt:n.state.xrayFileName})),l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement("label",{htmlFor:"upload-button-report"},l.a.createElement(V,{color:"primary",id:"upload-button-report",type:"file",onChange:n.onChangeHandlerReport}),l.a.createElement(C.a,{variant:"contained",endIcon:l.a.createElement($.a,null),component:"span"},"Report")),l.a.createElement("img",{id:"target-report",src:n.state.reportPreview,style:{maxWidth:320,maxHeight:320},alt:n.state.reportFileName})))),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap",style:{marginTop:"5%"}},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"flex-start",alignItems:"stretch",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(w.a,{variant:"h4"},"Please select the condition(s) for the uploaded X-Ray"),l.a.createElement("br",null)),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(D.a,null,l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"cardiomegaly",onChange:n.onChange}),label:"Cardiomegaly"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"edema",onChange:n.onChange}),label:"Edema"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"consolidation",onChange:n.onChange}),label:"Consolidation"})),l.a.createElement(D.a,null,l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"atelectasis",onChange:n.onChange}),label:"Atelectasis"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"pleural_effusion",onChange:n.onChange}),label:"Pleural Effusion"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"active_tuberculosis",onChange:n.onChange}),label:"Active Tuberculosis"})),l.a.createElement(D.a,null,l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"healed_tuberculosis",onChange:n.onChange}),label:"Healed Tuberculosis"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"metastasis",onChange:n.onChange}),label:"Metastasis"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"mass_lesion",onChange:n.onChange}),label:"Mass Lesion"})),l.a.createElement(D.a,null,l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"calcification",onChange:n.onChange}),label:"Calcification"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"none",onChange:n.onChange}),label:"None"}))))),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap"},l.a.createElement(C.a,{type:"submit",disabled:n.state.invalidFile||null===n.state.selectedXrayFile||0===n.state.inputSelection,onClick:n.calculate,variant:"contained",style:{marginRight:"5%",marginTop:"7.5%"}},"Submit"),l.a.createElement(C.a,{type:"reset",onClick:n.goHome,variant:"contained"},"Cancel"))),n.alert()))},n.goHome=function(){window.location.reload()},n.onChange=function(e){var a;n.setState(Object(E.a)(Object(E.a)({},n.state),{},(a={},Object(f.a)(a,e.target.name,e.target.checked),Object(f.a)(a,"inputSelection",!0===e.target.checked?n.state.inputSelection+1:0===n.state.inputSelection?0:n.state.inputSelection-1),a)))},n.alert=function(){return l.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:2e3,message:n.state.alertMessage})},n.result=function(){if("true"===n.state.responseData.isError&&"Raising error: unwantedImage"==n.state.responseData.message)return l.a.createElement(M.a,{open:"true"===n.state.responseData.isError&&"Raising error: unwantedImage"==n.state.responseData.message,onClose:n.goHome},l.a.createElement(Y.a,{style:{backgroundColor:"#3F51B5",color:"white"}},"Invalid Image"),l.a.createElement(U.a,{style:{marginTop:20}},l.a.createElement(L.a,{color:"black"},"Please upload valid chest x-ray image.")),l.a.createElement(W.a,null,l.a.createElement(C.a,{onClick:n.goHome},"OK")));if("false"===n.state.responseData.isError){var e=n.state.responseData.result,a=[{name:"Cardiomegaly",value:(100*e[2]).toFixed(2),threshold:X},{name:"Edema",value:(100*e[3]).toFixed(2),threshold:z},{name:"Consolidation",value:(100*e[4]).toFixed(2),threshold:J},{name:"Atelectasis",value:(100*e[5]).toFixed(2),threshold:K},{name:"Pleural Effusion",value:(100*e[6]).toFixed(2),threshold:q}],t=["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921"];return l.a.createElement("div",{style:{flexGrow:1,padding:"5%"}},l.a.createElement(v.a,{container:!0,justify:"center",wrap:"wrap",spacing:1,direction:"column"},l.a.createElement(v.a,{item:!0,sm:!0,container:!0,wrap:"wrap",justify:"center",alignItems:"center",spacing:1},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},l.a.createElement("img",{src:y+"/"+e[1].split(".")[0]+"_"+sessionStorage.getItem("UserId")+"."+e[1].split(".")[1],style:{maxWidth:"100%"},alt:""})),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},l.a.createElement(B.a,null,l.a.createElement(b.f,{height:400,minWidth:700},l.a.createElement(b.c,{data:a},l.a.createElement(b.h,{dataKey:"name"}),l.a.createElement(b.i,null),l.a.createElement(b.g,null),l.a.createElement(b.d,{align:"center",verticalAlign:"bottom",content:function(){return l.a.createElement(G.a,{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingLeft:"10%"}},l.a.createElement("li",{style:{color:"black",listStyleType:"square",marginRight:"5%"}},l.a.createElement(w.a,{variant:"caption",style:{color:"black"}},"cut-off line")))}}),l.a.createElement(b.a,{dataKey:"value"},a.map((function(e,a){return l.a.createElement(b.b,{key:"cell-".concat(a),fill:t[a],stroke:t[a]})}))),l.a.createElement(b.e,{dataKey:"threshold",stroke:"black"})))))),l.a.createElement(v.a,{item:!0,sm:!0,container:!0,wrap:"wrap",alignContent:"center",alignItems:"center",justify:"center",spacing:1},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},l.a.createElement("ul",null,l.a.createElement("li",null,"Bar graph of any condition above the cut-off line indicates the positive result of that condition in the supplied xray"),l.a.createElement("li",null,"Please submit your analysis of xray conditions through the table below the graph."),l.a.createElement("li",null,"Select Yes/No for all conditions and press 'Submit Feedback' button"),l.a.createElement("li",null,"Please refrain from submitting incomplete/wrong feedback")),l.a.createElement(C.a,{variant:"contained",onClick:n.submitFeedback,disabled:null===n.state.feedback.cardiomegaly||null===n.state.feedback.edema||null===n.state.feedback.consolidation||null===n.state.feedback.atelectasis||null===n.state.feedback.pleural_effusion},"Submit feedback")),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,wrap:"wrap"},l.a.createElement(B.a,null,l.a.createElement(j.a,{style:{border:"2px solid black",minWidth:650}},l.a.createElement(k.a,null,l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},"Cardiomegaly"),l.a.createElement(x.a,{align:"center"},"Edema"),l.a.createElement(x.a,{align:"center"},"Consolidation"),l.a.createElement(x.a,{align:"center"},"Atelectasis"),l.a.createElement(x.a,{align:"center"},"Pleural effusion")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},(100*e[2]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[3]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[4]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[5]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[6]).toFixed(2)+"%")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"cardiomegaly",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"edema",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"consolidation",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"atelectasis",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(I.a,null,l.a.createElement(F.a,{name:"pleural_effusion",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"Yes",value:"Yes"}),l.a.createElement(O.a,{control:l.a.createElement(_.a,null),label:"No",value:"No"}))))))))))))}return n.setState({open:!0,alertMessage:"Error occured, contact system admin"}),n.alert()},n.feedbackChangeHandler=function(e){var a=e.target,t=a.name,l=a.value;n.setState({feedback:Object(E.a)(Object(E.a)({},n.state.feedback),{},Object(f.a)({},t,l))})},n.submitFeedback=function(){n.props.resultAction(!1),n.setState({loading:!0}),fetch(y+"/feedback/"+n.state.responseData.feedbackResponseId,{method:"PUT",mode:"cors",body:JSON.stringify({feedback:n.state.feedback}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?n.setState({loading:!1,feedbackSubmitted:!0,selectedFile:null,responseData:null,preview:null,limit:!1,open:!0,alertMessage:"feedback added successfully"}):n.setState({loading:!1,selectedFile:null,responseData:null,preview:null,limit:!1,open:!0,alertMessage:"error while submitting feedback"})}))},n.state={selectedXrayFile:null,selectedReportFile:null,responseData:null,loading:!1,xrayPreview:null,xrayFileName:null,reportPreview:null,reportFileName:null,limit:!1,invalidFile:null,open:!1,alertMessage:"",isFeedbackSet:!1,feedback:{cardiomegaly:null,edema:null,consolidation:null,atelectasis:null,pleural_effusion:null},feedbackSubmitted:!1,inputSelection:0},n}return Object(c.a)(t,[{key:"render",value:function(){return this.props.history.history?l.a.createElement(P,null):this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(H.a,{disableShrink:!0})):this.props.result.result?this.result():this.state.limit?l.a.createElement(v.a,{container:!0,justify:"center",direction:"column",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(w.a,{variant:"h4"},"You have reached max limit. Please contact admin"),l.a.createElement("br",null),l.a.createElement(C.a,{onClick:this.goHome},"Home")):this.uploadImage()}}]),t}(n.Component),ee=Object(u.b)((function(e){return{userId:e.userId,history:e.history,result:e.result}}),(function(e){return{resultAction:function(a){e(p(a))}}}))(Object(A.a)((function(e){return{upload:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"5%"}}}))(Z)),ae=t(499),te=function(e){Object(s.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).alert=function(){return l.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:3e3,message:n.state.alertMessage})},n.ckeckInput=function(e){""!==n.state.username&&""!==n.state.password||(n.props.loginAction(!1),n.setState({open:!0,alertMessage:e,loading:!1}))},n.onSubmit=function(){n.setState({loading:!0}),n.ckeckInput("username or password cannot be empty"),fetch(y+"/login",{method:"POST",mode:"cors",body:JSON.stringify({username:n.state.username,password:n.state.password}),headers:{"Content-Type":"application/json"}}).then((function(e){return 200===e.status&&n.props.loginAction(!0),e.json()})).then((function(e){null===e.data?n.setState({loading:!1,open:!0,alertMessage:e.message}):(n.props.userAction(e.data.id),n.props.userNameAction(e.data.username),sessionStorage.setItem("Login",n.props.login.login),sessionStorage.setItem("UserId",e.data.id),sessionStorage.setItem("UserName",e.data.username),n.setState({loading:!1}))})).catch((function(e){return console.log(e)}))},n.login=function(){return l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(ae.a,{margin:"normal",color:"primary",onChange:function(e){n.setState({username:e.target.value})},label:"Username",id:"outlined-size-normal",variant:"outlined",fullWidth:!1}),l.a.createElement("br",null),l.a.createElement(ae.a,{color:"primary",onChange:function(e){n.setState({password:e.target.value})},label:"Password",id:"outlined-size-normal",variant:"outlined",fullWidth:!1,type:"password"}),l.a.createElement("br",null),l.a.createElement(C.a,{onClick:n.onSubmit,color:"primary"},"Login"),n.alert())},n.state={username:"",password:"",loading:!1,open:!1,alertMessage:""},n}return Object(c.a)(t,[{key:"render",value:function(){return this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(H.a,{disableShrink:!0})):sessionStorage.getItem("Login")?l.a.createElement(ee,null):this.login()}}]),t}(n.Component),ne=Object(u.b)((function(e){return{login:e.login}}),(function(e){return{loginAction:function(a){e(d(a))},userAction:function(a){e({type:"USER_ID",payload:a})},userNameAction:function(a){e({type:"USER_NAME",payload:a})}}}))(Object(A.a)((function(e){return{login:{alignContent:"center",alignItems:"center",justifyContent:"center"}}}))(te)),le=t(497),re=t(498),oe=function(e){Object(s.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).header=function(){return l.a.createElement("div",null,l.a.createElement(le.a,{position:"fixed"},l.a.createElement(re.a,null,l.a.createElement(w.a,{variant:"h6",style:{flexGrow:1}},"Smart X-Ray ",l.a.createElement("sup",null,"BETA")),l.a.createElement(C.a,{color:"inherit",onClick:n.logout},n.props.login.login||sessionStorage.getItem("Login")?"SIGNOUT":""))),l.a.createElement(re.a,null))},n.logout=function(){sessionStorage.clear(),n.props.loginAction(!1),n.props.historyAction(!1)},n.state={open:!1},n}return Object(c.a)(t,[{key:"render",value:function(){return this.header()}}]),t}(n.Component),ie=Object(u.b)((function(e){return{login:e.login,history:e.history,userName:e.userName}}),(function(e){return{loginAction:function(a){e(d(a))},historyAction:function(a){e(g(a))},resultAction:function(a){e(p(a))}}}))(Object(A.a)((function(e){return{toolbar:e.mixins.toolbar,drawer:{width:250}}}))(oe));var ce=function(){return l.a.createElement(n.Fragment,null,l.a.createElement(ie,null),l.a.createElement(ne,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=t(59),me={login:!1,loading:!1},ue=Object(se.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN":return Object(E.a)(Object(E.a)({},e),{},{login:a.payload});default:return e}},userName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_NAME":return Object(E.a)(Object(E.a)({},e),{},{userName:a.payload});default:return e}},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_ID":return Object(E.a)(Object(E.a)({},e),{},{userId:a.payload});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"HISTORY":return Object(E.a)(Object(E.a)({},e),{},{history:a.payload});default:return e}},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"RESULT":return Object(E.a)(Object(E.a)({},e),{},{result:a.payload});default:return e}}}),de=t(206),ge=Object(se.createStore)(ue,Object(de.composeWithDevTools)()),pe=t(208),fe=t(13),Ee=(t(435),t(436),t(446),Object(Q.a)("input")({display:"none"}),function(e){Object(s.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).calculate=function(e,a){n.setState({loading:!0}),fetch(y+"/userInput",{method:"PUT",mode:"cors",body:JSON.stringify({cardiomegaly:n.state.cardiomegaly,edema:n.state.edema,consolidation:n.state.consolidation,atelectasis:n.state.atelectasis,pleural_effusion:n.state.pleural_effusion,active_tuberculosis:n.state.active_tuberculosis,healed_tuberculosis:n.state.healed_tuberculosis,metastasis:n.state.metastasis,mass_lesion:n.state.mass_lesion,calcification:n.state.calcification,none:n.state.none,userAccessId:e,processedImagePath:a}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),500===e.status?n.setState({loading:!1,open:!0,alertMessage:"Something went wrong, please contact system admin"}):(n.setState({loading:!1,open:!0,alertMessage:"Response submitted successfully",index:n.state.index+1,inputSelection:0,cardiomegaly:void 0,edema:void 0,consolidation:void 0,atelectasis:void 0,pleural_effusion:void 0,active_tuberculosis:void 0,healed_tuberculosis:void 0,metastasis:void 0,mass_lesion:void 0,calcification:void 0,none:void 0}),console.log(n.state))})).catch((function(e){return console.log(e)}))},n.radiology=function(){for(var e=n.state,a=e.data,t=e.index;t<a.length;){var r=a[t],o=new XMLHttpRequest;if(o.open("HEAD",y+"/"+r.image_path.split(".")[0]+".jpg",!1),o.send(),"404"!=o.status)return l.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"row",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement("img",{id:"target",src:y+"/"+r.image_path.split(".")[0]+".jpg",style:{maxWidth:"100%"},alt:"sample image"})),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement("a",{href:y+"/"+r.report_path,target:"_blank"},"Report"))),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"flex-start",alignItems:"stretch",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(w.a,{variant:"h4"},"Please select the condition(s) for the uploaded X-Ray"),l.a.createElement("br",null)),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(D.a,null,l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"cardiomegaly",onChange:n.onChange}),label:"Cardiomegaly"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"edema",onChange:n.onChange}),label:"Edema"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"consolidation",onChange:n.onChange}),label:"Consolidation"})),l.a.createElement(D.a,null,l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"atelectasis",onChange:n.onChange}),label:"Atelectasis"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"pleural_effusion",onChange:n.onChange}),label:"Pleural Effusion"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"active_tuberculosis",onChange:n.onChange}),label:"Active Tuberculosis"})),l.a.createElement(D.a,null,l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"healed_tuberculosis",onChange:n.onChange}),label:"Healed Tuberculosis"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"metastasis",onChange:n.onChange}),label:"Metastasis"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"mass_lesion",onChange:n.onChange}),label:"Mass Lesion"})),l.a.createElement(D.a,null,l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"calcification",onChange:n.onChange}),label:"Calcification"}),l.a.createElement(O.a,{control:l.a.createElement(T.a,{color:"primary",name:"none",onChange:n.onChange}),label:"None"}))))),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap"},l.a.createElement(C.a,{type:"submit",disabled:0==n.state.inputSelection,onClick:function(){n.calculate(r.id,r.image_path.split(".")[0]+".jpg"),t++},variant:"contained",style:{marginRight:"5%",marginTop:"7.5%"}},"Submit"),l.a.createElement(C.a,{type:"reset",onClick:n.goHome,variant:"contained"},"Cancel"))),n.alert()));t++}return l.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},l.a.createElement(w.a,{variant:"h3"},"Nothing to show")))},n.goHome=function(){window.location.reload()},n.onChange=function(e){var a;n.setState(Object(E.a)(Object(E.a)({},n.state),{},(a={},Object(f.a)(a,e.target.name,e.target.checked),Object(f.a)(a,"inputSelection",!0===e.target.checked?n.state.inputSelection+1:0===n.state.inputSelection?0:n.state.inputSelection-1),a)))},n.alert=function(){return l.a.createElement(N.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:2e3,message:n.state.alertMessage})},n.state={responseData:null,loading:!0,open:!1,alertMessage:"",inputSelection:0,pageNumber:null,data:[],index:0},n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(y+"/userInput",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(a){console.log(a),sessionStorage.setItem("Login",!0),e.setState({data:a,loading:!1})}))}},{key:"render",value:function(){return this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(H.a,{disableShrink:!0})):this.radiology()}}]),t}(n.Component)),he=Object(u.b)((function(e){return{userId:e.userId,history:e.history,result:e.result}}),(function(e){return{resultAction:function(a){e(p(a))}}}))(Object(A.a)((function(e){return{upload:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"5%"}}}))(Ee));o.a.render(l.a.createElement(u.a,{store:ge},l.a.createElement(pe.a,null,l.a.createElement(fe.c,null,l.a.createElement(fe.a,{path:"/",element:l.a.createElement(ce,null)}),l.a.createElement(fe.a,{path:"/radiology",element:l.a.createElement(n.Fragment,null,l.a.createElement(ie,null)," ",l.a.createElement(he,null))})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[245,1,2]]]);
//# sourceMappingURL=main.c5c17fa0.chunk.js.map