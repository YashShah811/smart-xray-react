(this.webpackJsonpsmartxray=this.webpackJsonpsmartxray||[]).push([[0],{233:function(e,t,a){e.exports=a(424)},238:function(e,t,a){},239:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},424:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(15),o=a.n(r),c=(a(238),a(239),a(38)),i=a(39),s=a(42),u=a(41),m=a(29),d=function(e){return{type:"LOGIN",payload:e}},g=function(e){return{type:"HISTORY",payload:e}},p=function(e){return{type:"RESULT",payload:e}},E=a(44),f=a(17),h=(a(244),a(196)),b=(a(245),"https://xray1.deepnets.in"),y=a(19),v=a(456),k=a(127),C=a(460),w=a(461),j=a(462),S=a(463),x=a(464),O=a(483),I=a(484),F=a(466),N=a(479),A=a(481),_=a(468),H=a(5),D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).history=function(){return l.a.createElement(v.a,{container:!0,justify:"center"},n.state.data.map((function(e,t){var a=[{name:"Cardiomegaly",value:(100*e.cardiomegaly).toFixed(2),threshold:46.52},{name:"Edema",value:(100*e.edema).toFixed(2),threshold:71.05},{name:"Consolidation",value:(100*e.consolidation).toFixed(2),threshold:65.9},{name:"Atelectasis",value:(100*e.atelectasis).toFixed(2),threshold:54.93},{name:"Pleural Effusion",value:(100*e.pleural_effusion).toFixed(2),threshold:34.61}],r=["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921"];return l.a.createElement(v.a,{container:!0,item:!0,xs:12,style:{background:"aliceblue",marginTop:"1%"}},l.a.createElement(v.a,{item:!0,xs:12},l.a.createElement(k.a,{variant:"h5",color:"primary",align:"center"},new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(new Date(e.access_dts)))),l.a.createElement(v.a,{item:!0,xs:4},l.a.createElement("img",{style:{display:"block",marginRight:"auto",marginLeft:"auto"},src:b+"/"+e.image_path.split(".")[0]+"_"+localStorage.getItem("UserId")+"."+e.image_path.split(".")[1],alt:"",width:400,height:400})),l.a.createElement(v.a,{item:!0,xs:8},l.a.createElement(y.c,{style:{fontSize:"calc(5px + 2vmin)"},width:1e3,height:400,data:a},l.a.createElement(y.h,{tick:!1}),l.a.createElement(y.i,null),l.a.createElement(y.d,{align:"right",layout:"vertical",verticalAlign:"middle",content:function(){return l.a.createElement("ul",null,a.map((function(e,t){return l.a.createElement("li",{key:t,style:{color:r[t],listStyleType:"square"}},l.a.createElement("p",{style:{color:"black"}},e.name))})))}}),l.a.createElement(y.a,{dataKey:"value"},a.map((function(e,t){return l.a.createElement(y.b,{key:"cell-".concat(t),fill:r[t],stroke:r[t]})}))),l.a.createElement(y.e,{dataKey:"threshold"}))),l.a.createElement(v.a,{container:!0,item:!0,xs:4,alignContent:"center",alignItems:"center",justify:"center"},l.a.createElement(C.a,{onClick:function(){return n.updateFeedbackHandler(t,e.userFeedback.id)}},"Update feedback")),l.a.createElement(v.a,{container:!0,item:!0,xs:8},l.a.createElement(w.a,{style:{border:"2px solid black",marginRight:"2%",marginBottom:"2%"}},l.a.createElement(j.a,null,l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},"Cardiomegaly"),l.a.createElement(x.a,{align:"center"},"Edema"),l.a.createElement(x.a,{align:"center"},"Consolidation"),l.a.createElement(x.a,{align:"center"},"Atelectasis"),l.a.createElement(x.a,{align:"center"},"Pleural effusion")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},(100*e.cardiomegaly).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.edema).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.consolidation).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.atelectasis).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e.pleural_effusion).toFixed(2)+"%")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"cardiomegaly",value:e.userFeedback.cardiomegaly,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"edema",value:e.userFeedback.edema,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"consolidation",value:e.userFeedback.consolidation,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"atelectasis",value:e.userFeedback.atelectasis,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"pleural_effusion",value:e.userFeedback.pleural_effusion,onChange:function(t){return n.feedbackChangeHandler(t,e.userFeedback.user_access_details_id)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"})))))))))})),n.alert())},n.alert=function(){return l.a.createElement(A.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:2e3,message:n.state.message})},n.feedbackChangeHandler=function(e,t){var a=e.target,l=a.name,r=a.value,o=n.state.data.findIndex((function(e){return e.userFeedback.user_access_details_id===t})),c=Object(h.a)(n.state.data);c[o].userFeedback=Object(f.a)(Object(f.a)({},c[o].userFeedback),{},Object(E.a)({},l,r)),n.setState({data:c})},n.updateFeedbackHandler=function(e,t){n.setState({loading:!0}),fetch(b+"/feedback/"+t,{method:"PUT",mode:"cors",body:JSON.stringify({feedback:n.state.data[e].userFeedback}),headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),200===e.status?n.setState({loading:!1,open:!0,message:"Feedback successfully updated"}):n.setState({loading:!1,open:!0,message:"Error in updating feedback, try after some time"})})).catch((function(e){n.setState({loading:!1,open:!0,message:e})}))},n.home=function(){n.props.historyAction(!1),n.setState({home:!0})},n.state={data:[],key:[],home:!1,loading:!1,open:!1,message:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),fetch(b+"/history/"+sessionStorage.getItem("UserId"),{method:"GET",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(t){e.setState({data:t.data,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(_.a,{disableShrink:!0})):this.state.home?l.a.createElement(ee,null):this.history()}}]),a}(n.Component),Y=Object(m.b)((function(e){return{userId:e.userId}}),(function(e){return{historyAction:function(t){e(g(t))}}}))(Object(H.a)((function(e){return{offset:e.mixins.toolbar,root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},img:{margin:"auto",display:"block",maxWidth:"400",maxHeight:"400"},item:{alignContent:"center",alignItems:"center",justifyContent:"center"}}}))(D)),T=a(465),P=a(480),R=a(482),U=a(470),M=a(471),B=a(472),G=a(473),L=a(474),W=a(486),J=46.52,z=67.46,K=65.9,q=54.93,X=43.74,$=a(485),Q=a(469),V=Object(Q.a)("input")({display:"none"}),Z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeHandler=function(e){var t=new FileReader,a=e.target.files[0];if(n.setState({selectedFile:null,preview:null}),a){var l=e.target.files[0].name,r=l.substring(l.lastIndexOf(".")+1);"jpg"===r||"png"===r||"jpeg"===r||"JPG"===r||"PNG"===r||"JPEG"===r?(t.onloadend=function(){n.setState({invalidFile:!1,selectedFile:a,preview:t.result})},t.readAsDataURL(a)):n.setState({invalidFile:!0,open:!0,alertMessage:"Invalid file."})}},n.calculate=function(){if(console.log("State: ",n.state),n.setState({loading:!0}),null===n.state.selectedFile)alert("Please select file."),n.setState({loading:!1,open:!0,alertMessage:"Please select file."});else{var e=new FormData;e.append("image",n.state.selectedFile),e.append("cardiomegaly",n.state.cardiomegaly),e.append("edema",n.state.edema),e.append("consolidation",n.state.consolidation),e.append("atelectasis",n.state.atelectasis),e.append("pleural_effusion",n.state.pleural_effusion),e.append("none",n.state.none),fetch(b+"/calculate/"+sessionStorage.getItem("UserId"),{method:"POST",mode:"cors",body:e,headers:{Accept:"application/form-data","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){null===e.data?n.setState({loading:!1,limit:!0}):n.setState({loading:!1,responseData:e.data,preview:null,selectedFile:null,open:!0,alertMessage:"File submitted successfully"})})).catch((function(e){return console.log(e)}))}},n.uploadImage=function(){return l.a.createElement("div",{style:{flexGrow:1,padding:"3%",margin:"3%"}},l.a.createElement(v.a,{container:!0,direction:"row",sm:!0,wrap:"wrap",alignItems:"center",alignContent:"center",justify:"center",spacing:2},l.a.createElement(v.a,{container:!0,sm:4,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,direction:"column",justify:"center",alignItems:"center",wrap:"wrap"},l.a.createElement(k.a,{style:{padding:"5px 10px"},variant:"h4"},"Instructions"),l.a.createElement(k.a,{style:{padding:"2px"}},"Sample xray"),l.a.createElement("img",{id:"target",src:b+"/sample.jpg",style:{maxWidth:"100%"},alt:"sample image"}),l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,"Only jpg, jpeg and png images are valid"),l.a.createElement("li",null,"Please upload properly cropped and aligned image",l.a.createElement("br",null),"(Refer to the sample xray)"),l.a.createElement("li",null,"Please upload only black and white xray image"),l.a.createElement("li",null,"Only chest xrays are supported")))),l.a.createElement(v.a,{container:!0,direction:"column",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,direction:"row",justify:"center",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"flex-start",alignItems:"center",sm:!0,wrap:"wrap"},l.a.createElement("label",{htmlFor:"upload-button"},l.a.createElement(V,{color:"primary",id:"upload-button",type:"file",accept:"image/*",onChange:n.onChangeHandler}),l.a.createElement(C.a,{variant:"contained",endIcon:l.a.createElement($.a,null),component:"span"},"Upload")),l.a.createElement("img",{id:"target",src:n.state.preview,style:{maxWidth:"100%"},alt:""}),n.alert()),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"flex-start",alignItems:"stretch",sm:!0,wrap:"wrap"},l.a.createElement(k.a,{variant:"h4"},"Please select the condition(s) for the uploaded X-Ray"),l.a.createElement("br",null),l.a.createElement(T.a,null,l.a.createElement(F.a,{control:l.a.createElement(P.a,{color:"primary",name:"cardiomegaly",onChange:n.onChange}),label:"Cardiomegaly"}),l.a.createElement(F.a,{control:l.a.createElement(P.a,{color:"primary",name:"edema",onChange:n.onChange}),label:"Edema"}),l.a.createElement(F.a,{control:l.a.createElement(P.a,{color:"primary",name:"consolidation",onChange:n.onChange}),label:"Consolidation"}),l.a.createElement(F.a,{control:l.a.createElement(P.a,{color:"primary",name:"atelectasis",onChange:n.onChange}),label:"Atelectasis"}),l.a.createElement(F.a,{control:l.a.createElement(P.a,{color:"primary",name:"pleural_effusion",onChange:n.onChange}),label:"Pleural Effusion"}),l.a.createElement(F.a,{control:l.a.createElement(P.a,{color:"primary",name:"none",onChange:n.onChange}),label:"None"})))),l.a.createElement(v.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"baseline",sm:!0,wrap:"wrap"},l.a.createElement(C.a,{type:"submit",disabled:n.state.invalidFile||null===n.state.selectedFile||0===n.state.inputSelection,onClick:n.calculate,variant:"contained",style:{marginRight:"5%",marginTop:"7.5%"}},"Submit"),l.a.createElement(C.a,{type:"reset",onClick:n.goHome,variant:"contained"},"Cancel")))))},n.goHome=function(){window.location.reload()},n.onChange=function(e){var t;n.setState(Object(f.a)(Object(f.a)({},n.state),{},(t={},Object(E.a)(t,e.target.name,e.target.checked),Object(E.a)(t,"inputSelection",!0===e.target.checked?n.state.inputSelection+1:0===n.state.inputSelection?0:n.state.inputSelection-1),t)))},n.alert=function(){return l.a.createElement(A.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:2e3,message:n.state.alertMessage})},n.result=function(){if("true"===n.state.responseData.isError&&"Raising error: unwantedImage"==n.state.responseData.message)return l.a.createElement(R.a,{open:"true"===n.state.responseData.isError&&"Raising error: unwantedImage"==n.state.responseData.message,onClose:n.goHome},l.a.createElement(U.a,{style:{backgroundColor:"#3F51B5",color:"white"}},"Invalid Image"),l.a.createElement(M.a,{style:{marginTop:20}},l.a.createElement(B.a,{color:"black"},"Please upload valid chest x-ray image.")),l.a.createElement(G.a,null,l.a.createElement(C.a,{onClick:n.goHome},"OK")));if("false"===n.state.responseData.isError){var e=n.state.responseData.result,t=[{name:"Cardiomegaly",value:(100*e[2]).toFixed(2),threshold:J},{name:"Edema",value:(100*e[3]).toFixed(2),threshold:z},{name:"Consolidation",value:(100*e[4]).toFixed(2),threshold:K},{name:"Atelectasis",value:(100*e[5]).toFixed(2),threshold:q},{name:"Pleural Effusion",value:(100*e[6]).toFixed(2),threshold:X}],a=["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921"];return l.a.createElement("div",{style:{flexGrow:1,padding:"5%"}},l.a.createElement(v.a,{container:!0,justify:"center",wrap:"wrap",spacing:1,direction:"column"},l.a.createElement(v.a,{item:!0,sm:!0,container:!0,wrap:"wrap",justify:"center",alignItems:"center",spacing:1},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},l.a.createElement("img",{src:b+"/"+e[1].split(".")[0]+"_"+sessionStorage.getItem("UserId")+"."+e[1].split(".")[1],style:{maxWidth:"100%"},alt:""})),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},l.a.createElement(L.a,null,l.a.createElement(y.f,{height:400,minWidth:700},l.a.createElement(y.c,{data:t},l.a.createElement(y.h,{dataKey:"name"}),l.a.createElement(y.i,null),l.a.createElement(y.g,null),l.a.createElement(y.d,{align:"center",verticalAlign:"bottom",content:function(){return l.a.createElement(W.a,{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingLeft:"10%"}},l.a.createElement("li",{style:{color:"black",listStyleType:"square",marginRight:"5%"}},l.a.createElement(k.a,{variant:"caption",style:{color:"black"}},"cut-off line")))}}),l.a.createElement(y.a,{dataKey:"value"},t.map((function(e,t){return l.a.createElement(y.b,{key:"cell-".concat(t),fill:a[t],stroke:a[t]})}))),l.a.createElement(y.e,{dataKey:"threshold",stroke:"black"})))))),l.a.createElement(v.a,{item:!0,sm:!0,container:!0,wrap:"wrap",alignContent:"center",alignItems:"center",justify:"center",spacing:1},l.a.createElement(v.a,{container:!0,item:!0,sm:!0,alignContent:"center",alignItems:"center",justify:"center",wrap:"wrap"},l.a.createElement("ul",null,l.a.createElement("li",null,"Bar graph of any condition above the cut-off line indicates the positive result of that condition in the supplied xray"),l.a.createElement("li",null,"Please submit your analysis of xray conditions through the table below the graph."),l.a.createElement("li",null,"Select Yes/No for all conditions and press 'Submit Feedback' button"),l.a.createElement("li",null,"Please refrain from submitting incomplete/wrong feedback")),l.a.createElement(C.a,{variant:"contained",onClick:n.submitFeedback,disabled:null===n.state.feedback.cardiomegaly||null===n.state.feedback.edema||null===n.state.feedback.consolidation||null===n.state.feedback.atelectasis||null===n.state.feedback.pleural_effusion},"Submit feedback")),l.a.createElement(v.a,{container:!0,item:!0,sm:!0,wrap:"wrap"},l.a.createElement(L.a,null,l.a.createElement(w.a,{style:{border:"2px solid black",minWidth:650}},l.a.createElement(j.a,null,l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},"Cardiomegaly"),l.a.createElement(x.a,{align:"center"},"Edema"),l.a.createElement(x.a,{align:"center"},"Consolidation"),l.a.createElement(x.a,{align:"center"},"Atelectasis"),l.a.createElement(x.a,{align:"center"},"Pleural effusion")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},(100*e[2]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[3]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[4]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[5]).toFixed(2)+"%"),l.a.createElement(x.a,{align:"center"},(100*e[6]).toFixed(2)+"%")),l.a.createElement(S.a,null,l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"cardiomegaly",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"edema",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"consolidation",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"atelectasis",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"})))),l.a.createElement(x.a,{align:"center"},l.a.createElement(O.a,null,l.a.createElement(I.a,{name:"pleural_effusion",onChange:function(e){return n.feedbackChangeHandler(e)}},l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"Yes",value:"Yes"}),l.a.createElement(F.a,{control:l.a.createElement(N.a,null),label:"No",value:"No"}))))))))))))}return n.setState({open:!0,alertMessage:"Error occured, contact system admin"}),n.alert()},n.feedbackChangeHandler=function(e){var t=e.target,a=t.name,l=t.value;n.setState({feedback:Object(f.a)(Object(f.a)({},n.state.feedback),{},Object(E.a)({},a,l))})},n.submitFeedback=function(){n.props.resultAction(!1),n.setState({loading:!0}),fetch(b+"/feedback/"+n.state.responseData.feedbackResponseId,{method:"PUT",mode:"cors",body:JSON.stringify({feedback:n.state.feedback}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?n.setState({loading:!1,feedbackSubmitted:!0,selectedFile:null,responseData:null,preview:null,limit:!1,open:!0,alertMessage:"feedback added successfully"}):n.setState({loading:!1,selectedFile:null,responseData:null,preview:null,limit:!1,open:!0,alertMessage:"error while submitting feedback"})}))},n.state={selectedFile:null,responseData:null,loading:!1,preview:null,limit:!1,invalidFile:null,open:!1,alertMessage:"",isFeedbackSet:!1,feedback:{cardiomegaly:null,edema:null,consolidation:null,atelectasis:null,pleural_effusion:null},feedbackSubmitted:!1,inputSelection:0},n}return Object(i.a)(a,[{key:"render",value:function(){return this.props.history.history?l.a.createElement(Y,null):this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(_.a,{disableShrink:!0})):this.props.result.result?this.result():this.state.limit?l.a.createElement(v.a,{container:!0,justify:"center",direction:"column",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(k.a,{variant:"h4"},"You have reached max limit. Please contact admin"),l.a.createElement("br",null),l.a.createElement(C.a,{onClick:this.goHome},"Home")):this.uploadImage()}}]),a}(n.Component),ee=Object(m.b)((function(e){return{userId:e.userId,history:e.history,result:e.result}}),(function(e){return{resultAction:function(t){e(p(t))}}}))(Object(H.a)((function(e){return{upload:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"5%"}}}))(Z)),te=a(477),ae=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).alert=function(){return l.a.createElement(A.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n.state.open,onClose:function(){return n.setState({open:!n.state.open})},autoHideDuration:3e3,message:n.state.alertMessage})},n.ckeckInput=function(e){""!==n.state.username&&""!==n.state.password||(n.props.loginAction(!1),n.setState({open:!0,alertMessage:e,loading:!1}))},n.onSubmit=function(){n.setState({loading:!0}),n.ckeckInput("username or password cannot be empty"),fetch(b+"/login",{method:"POST",mode:"cors",body:JSON.stringify({username:n.state.username,password:n.state.password}),headers:{"Content-Type":"application/json"}}).then((function(e){return 200===e.status&&n.props.loginAction(!0),e.json()})).then((function(e){null===e.data?n.setState({loading:!1,open:!0,alertMessage:e.message}):(n.props.userAction(e.data.id),n.props.userNameAction(e.data.username),sessionStorage.setItem("Login",n.props.login.login),sessionStorage.setItem("UserId",e.data.id),sessionStorage.setItem("UserName",e.data.username),n.setState({loading:!1}))})).catch((function(e){return console.log(e)}))},n.login=function(){return l.a.createElement(v.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(te.a,{margin:"normal",color:"primary",onChange:function(e){n.setState({username:e.target.value})},label:"Username",id:"outlined-size-normal",variant:"outlined",fullWidth:!1}),l.a.createElement("br",null),l.a.createElement(te.a,{color:"primary",onChange:function(e){n.setState({password:e.target.value})},label:"Password",id:"outlined-size-normal",variant:"outlined",fullWidth:!1,type:"password"}),l.a.createElement("br",null),l.a.createElement(C.a,{onClick:n.onSubmit,color:"primary"},"Login"),n.alert())},n.state={username:"",password:"",loading:!1,open:!1,alertMessage:""},n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.loading?l.a.createElement(v.a,{container:!0,item:!0,justify:"center",alignItems:"center",style:{minHeight:"80vh"}},l.a.createElement(_.a,{disableShrink:!0})):sessionStorage.getItem("Login")?l.a.createElement(ee,null):this.login()}}]),a}(n.Component),ne=Object(m.b)((function(e){return{login:e.login}}),(function(e){return{loginAction:function(t){e(d(t))},userAction:function(t){e({type:"USER_ID",payload:t})},userNameAction:function(t){e({type:"USER_NAME",payload:t})}}}))(Object(H.a)((function(e){return{login:{alignContent:"center",alignItems:"center",justifyContent:"center"}}}))(ae)),le=a(475),re=a(476),oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).header=function(){return l.a.createElement("div",null,l.a.createElement(le.a,{position:"fixed"},l.a.createElement(re.a,null,l.a.createElement(k.a,{variant:"h6",style:{flexGrow:1}},"Smart X-Ray ",l.a.createElement("sup",null,"BETA")),l.a.createElement(k.a,{variant:"h6",style:{flexGrow:1}},n.props.login.login||sessionStorage.getItem("Login")?(sessionStorage.getItem("UserName"),"Hi, there"):""),l.a.createElement(C.a,{color:"inherit",onClick:function(){return n.props.resultAction(!1)}},n.props.login.login||sessionStorage.getItem("Login")?"Upload":""),l.a.createElement(C.a,{color:"inherit",onClick:n.logout},n.props.login.login||sessionStorage.getItem("Login")?"SIGNOUT":""))),l.a.createElement(re.a,null))},n.logout=function(){sessionStorage.clear(),n.props.loginAction(!1),n.props.historyAction(!1)},n.state={open:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return this.header()}}]),a}(n.Component),ce=Object(m.b)((function(e){return{login:e.login,history:e.history,userName:e.userName}}),(function(e){return{loginAction:function(t){e(d(t))},historyAction:function(t){e(g(t))},resultAction:function(t){e(p(t))}}}))(Object(H.a)((function(e){return{toolbar:e.mixins.toolbar,drawer:{width:250}}}))(oe));var ie=function(){return l.a.createElement(n.Fragment,null,l.a.createElement(ce,null),l.a.createElement(ne,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=a(50),ue={login:!1,loading:!1},me=Object(se.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(f.a)(Object(f.a)({},e),{},{login:t.payload});default:return e}},userName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_NAME":return Object(f.a)(Object(f.a)({},e),{},{userName:t.payload});default:return e}},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ID":return Object(f.a)(Object(f.a)({},e),{},{userId:t.payload});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HISTORY":return Object(f.a)(Object(f.a)({},e),{},{history:t.payload});default:return e}},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESULT":return Object(f.a)(Object(f.a)({},e),{},{result:t.payload});default:return e}}}),de=a(195),ge=Object(se.createStore)(me,Object(de.composeWithDevTools)());o.a.render(l.a.createElement(m.a,{store:ge},l.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[233,1,2]]]);
//# sourceMappingURL=main.47868117.chunk.js.map